





<input class="sheet-character-name" type="hidden" name="attr_character_name" />
<div class="sheet-layout">

    <div class="sheet-basics">
        <label>Name</label>
        <input type="text" name="attr_character_name" />

        <label>Erfolgsabzug</label>
        <input type="number" step="1" name="attr_penalty" class="sheet-variable" value="0"/>

        <label>Sonstige Probe</label>
        

<button type='roll'
        name='roll_custom-roll'
        value='&{template:adz} {{title=?{Titel|Probe}}} {{dice=[[?{Würfelanzahl|1}+0]]}} {{result=[[(?{Würfelanzahl|1}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>



        <label>Sonstige Probe (ohne Abzug)</label>
        

<button type='roll'
        name='roll_custom-roll-special'
        value='&{template:adz} {{title=?{Titel|Probe}}} {{dice=[[?{Würfelanzahl|1}+0]]}} {{result=[[(?{Würfelanzahl|1}+0)d6>5cs>5cf<0]]}}'>
</button>



        <label>Initiativewurf</label>
        <button type='roll'
                name='roll_initiative'
                value='&{template:adz} {{title=Initiative}} {{result=[[@{calc_initiative_base} + 2d6cs>7cf<0]]}}'>
        </button>
        <input name="attr_calc_initiative_base" class="number" readonly="true" />

        <label>Glück dazuwürfeln</label>
        

<button type='roll'
        name='roll_use-luck'
        value='&{template:adz} {{title=＋ Glück}} {{dice=[[@{gl}+0]]}} {{result=[[(@{gl}+0)d6>5cs>5cf<0]]}}'>
</button>



        <label>Entzugsattribut</label>
        <select name="attr_drain_attribute">
            
                <option value="kl">Klugheit</option>
            
                <option value="wk">Willenskraft</option>
            
                <option value="in">Intuition</option>
            
                <option value="ch">Charisma</option>
            
        </select>
    </div>

    <div class="sheet-notes">
        <label>Notizen</label>
        <textarea name="attr_character_notes"></textarea>
    </div>

    <div class="sheet-attributes">
        <h2>Attribute</h2>

        <div class="sheet-attributes-list">
            
            

<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Körperkraft</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_kk" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kk" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Konstitution</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_ko" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ko" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Gewandtheit</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_ge" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ge" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Fingerfertigkeit</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_ff" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ff" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Klugheit</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_kl" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kl" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Willenskraft</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_wk" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wk" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Intuition</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_in" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_in" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Charisma</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_ch" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ch" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
            

<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Glück</label>
</button>


            <div class="horizontal">
                <input type="number" step="1" name="attr_gl" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_gl" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </div>
            
        </div>
    </div>

    <div class="sheet-skills">
        <h2>Fertigkeiten</h2>

        <div class="skill-list">
            <fieldset class="repeating_skills">
              <input type="text" name="attr_name" />
              <select name="attr_attribute">
                <option value="-">-</option>
                
                <option value="kk">KK</option>
                
                <option value="ko">KO</option>
                
                <option value="ge">GE</option>
                
                <option value="ff">FF</option>
                
                <option value="kl">KL</option>
                
                <option value="wk">WK</option>
                
                <option value="in">IN</option>
                
                <option value="ch">CH</option>
                
                <option value="gl">GL</option>
                
              </select>
              <input type="number" name="attr_value" />
              

                <div class="stack clickable-total">
                    <input name="attr_calc_total" class="number" readonly="true" />
                    

<button type='roll'
        name='roll_@{name}'
        value='&{template:adz} {{title=@{name}}} {{dice=[[@{calc_total}+0]]}} {{result=[[(@{calc_total}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                </div>
            </fieldset>
            <button type="action" name="act_add-skills">Add Row</button>
        </div>
    </div>

    <div class="sheet-magic">
        <h2>Techniken & Magiebereiche</h2>

        <div class="sheet-magic-matrix">
            <div></div>
            <div></div>
            <div class="vertical r1 c3">
                <label>Entzug</label>
            </div>
            
                <div class="vertical technique r1 c4">
                    <label>Beherrschen</label>
                    <input name="attr_beherrschen" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c5">
                    <label>Erkennen</label>
                    <input name="attr_erkennen" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c6">
                    <label>Erschaffen</label>
                    <input name="attr_erschaffen" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c7">
                    <label>Kooperieren</label>
                    <input name="attr_kooperieren" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c8">
                    <label>Modifizieren</label>
                    <input name="attr_modifizieren" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c9">
                    <label>Verankern</label>
                    <input name="attr_verankern" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c10">
                    <label>Versetzen</label>
                    <input name="attr_versetzen" type="number" step="1" max="10"/>
                </div>
            
                <div class="vertical technique r1 c11">
                    <label>Zerstören</label>
                    <input name="attr_zerstören" type="number" step="1" max="10"/>
                </div>
            
            
                
                <label class="domain r2 c1">Darstellung</label>
                <input class="r2 c2" type="number" step="1" name="attr_darstellung" max="10"/>
                <div class="r2 c3">
                    

<button type='roll'
        name='roll_roll-drain-Darstellung'
        value='&{template:adz} {{title=Entzug (Darstellung)}} {{dice=[[@{calc_drain_darstellung}+0]]}} {{result=[[(@{calc_drain_darstellung}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r2 c4">
                        <input name="attr_darstellung_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_beherrschen'
        value='&{template:adz} {{title=Darstellung beherrschen}} {{dice=[[@{calc_total_darstellung_beherrschen}+0]]}} {{result=[[(@{calc_total_darstellung_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c5">
                        <input name="attr_darstellung_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_erkennen'
        value='&{template:adz} {{title=Darstellung erkennen}} {{dice=[[@{calc_total_darstellung_erkennen}+0]]}} {{result=[[(@{calc_total_darstellung_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c6">
                        <input name="attr_darstellung_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_erschaffen'
        value='&{template:adz} {{title=Darstellung erschaffen}} {{dice=[[@{calc_total_darstellung_erschaffen}+0]]}} {{result=[[(@{calc_total_darstellung_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c7">
                        <input name="attr_darstellung_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_kooperieren'
        value='&{template:adz} {{title=Darstellung kooperieren}} {{dice=[[@{calc_total_darstellung_kooperieren}+0]]}} {{result=[[(@{calc_total_darstellung_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c8">
                        <input name="attr_darstellung_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_modifizieren'
        value='&{template:adz} {{title=Darstellung modifizieren}} {{dice=[[@{calc_total_darstellung_modifizieren}+0]]}} {{result=[[(@{calc_total_darstellung_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c9">
                        <input name="attr_darstellung_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_verankern'
        value='&{template:adz} {{title=Darstellung verankern}} {{dice=[[@{calc_total_darstellung_verankern}+0]]}} {{result=[[(@{calc_total_darstellung_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c10">
                        <input name="attr_darstellung_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_versetzen'
        value='&{template:adz} {{title=Darstellung versetzen}} {{dice=[[@{calc_total_darstellung_versetzen}+0]]}} {{result=[[(@{calc_total_darstellung_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r2 c1"></div>
                
                    
                    <div class="horizontal node r2 c11">
                        <input name="attr_darstellung_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_darstellung_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_darstellung_zerstören'
        value='&{template:adz} {{title=Darstellung zerstören}} {{dice=[[@{calc_total_darstellung_zerstören}+0]]}} {{result=[[(@{calc_total_darstellung_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r2 c1"></div>
                
            
                
                <label class="domain r3 c1">Erde</label>
                <input class="r3 c2" type="number" step="1" name="attr_erde" max="10"/>
                <div class="r3 c3">
                    

<button type='roll'
        name='roll_roll-drain-Erde'
        value='&{template:adz} {{title=Entzug (Erde)}} {{dice=[[@{calc_drain_erde}+0]]}} {{result=[[(@{calc_drain_erde}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r3 c4">
                        <input name="attr_erde_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_beherrschen'
        value='&{template:adz} {{title=Erde beherrschen}} {{dice=[[@{calc_total_erde_beherrschen}+0]]}} {{result=[[(@{calc_total_erde_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c5">
                        <input name="attr_erde_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_erkennen'
        value='&{template:adz} {{title=Erde erkennen}} {{dice=[[@{calc_total_erde_erkennen}+0]]}} {{result=[[(@{calc_total_erde_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c6">
                        <input name="attr_erde_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_erschaffen'
        value='&{template:adz} {{title=Erde erschaffen}} {{dice=[[@{calc_total_erde_erschaffen}+0]]}} {{result=[[(@{calc_total_erde_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c7">
                        <input name="attr_erde_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_kooperieren'
        value='&{template:adz} {{title=Erde kooperieren}} {{dice=[[@{calc_total_erde_kooperieren}+0]]}} {{result=[[(@{calc_total_erde_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c8">
                        <input name="attr_erde_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_modifizieren'
        value='&{template:adz} {{title=Erde modifizieren}} {{dice=[[@{calc_total_erde_modifizieren}+0]]}} {{result=[[(@{calc_total_erde_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c9">
                        <input name="attr_erde_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_verankern'
        value='&{template:adz} {{title=Erde verankern}} {{dice=[[@{calc_total_erde_verankern}+0]]}} {{result=[[(@{calc_total_erde_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c10">
                        <input name="attr_erde_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_versetzen'
        value='&{template:adz} {{title=Erde versetzen}} {{dice=[[@{calc_total_erde_versetzen}+0]]}} {{result=[[(@{calc_total_erde_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r3 c1"></div>
                
                    
                    <div class="horizontal node r3 c11">
                        <input name="attr_erde_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_erde_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_erde_zerstören'
        value='&{template:adz} {{title=Erde zerstören}} {{dice=[[@{calc_total_erde_zerstören}+0]]}} {{result=[[(@{calc_total_erde_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r3 c1"></div>
                
            
                
                <label class="domain r4 c1">Feuer</label>
                <input class="r4 c2" type="number" step="1" name="attr_feuer" max="10"/>
                <div class="r4 c3">
                    

<button type='roll'
        name='roll_roll-drain-Feuer'
        value='&{template:adz} {{title=Entzug (Feuer)}} {{dice=[[@{calc_drain_feuer}+0]]}} {{result=[[(@{calc_drain_feuer}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r4 c4">
                        <input name="attr_feuer_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_beherrschen'
        value='&{template:adz} {{title=Feuer beherrschen}} {{dice=[[@{calc_total_feuer_beherrschen}+0]]}} {{result=[[(@{calc_total_feuer_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c5">
                        <input name="attr_feuer_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_erkennen'
        value='&{template:adz} {{title=Feuer erkennen}} {{dice=[[@{calc_total_feuer_erkennen}+0]]}} {{result=[[(@{calc_total_feuer_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c6">
                        <input name="attr_feuer_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_erschaffen'
        value='&{template:adz} {{title=Feuer erschaffen}} {{dice=[[@{calc_total_feuer_erschaffen}+0]]}} {{result=[[(@{calc_total_feuer_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c7">
                        <input name="attr_feuer_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_kooperieren'
        value='&{template:adz} {{title=Feuer kooperieren}} {{dice=[[@{calc_total_feuer_kooperieren}+0]]}} {{result=[[(@{calc_total_feuer_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c8">
                        <input name="attr_feuer_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_modifizieren'
        value='&{template:adz} {{title=Feuer modifizieren}} {{dice=[[@{calc_total_feuer_modifizieren}+0]]}} {{result=[[(@{calc_total_feuer_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c9">
                        <input name="attr_feuer_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_verankern'
        value='&{template:adz} {{title=Feuer verankern}} {{dice=[[@{calc_total_feuer_verankern}+0]]}} {{result=[[(@{calc_total_feuer_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c10">
                        <input name="attr_feuer_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_versetzen'
        value='&{template:adz} {{title=Feuer versetzen}} {{dice=[[@{calc_total_feuer_versetzen}+0]]}} {{result=[[(@{calc_total_feuer_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r4 c1"></div>
                
                    
                    <div class="horizontal node r4 c11">
                        <input name="attr_feuer_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_feuer_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_feuer_zerstören'
        value='&{template:adz} {{title=Feuer zerstören}} {{dice=[[@{calc_total_feuer_zerstören}+0]]}} {{result=[[(@{calc_total_feuer_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r4 c1"></div>
                
            
                
                <label class="domain r5 c1">Geist</label>
                <input class="r5 c2" type="number" step="1" name="attr_geist" max="10"/>
                <div class="r5 c3">
                    

<button type='roll'
        name='roll_roll-drain-Geist'
        value='&{template:adz} {{title=Entzug (Geist)}} {{dice=[[@{calc_drain_geist}+0]]}} {{result=[[(@{calc_drain_geist}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r5 c4">
                        <input name="attr_geist_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_beherrschen'
        value='&{template:adz} {{title=Geist beherrschen}} {{dice=[[@{calc_total_geist_beherrschen}+0]]}} {{result=[[(@{calc_total_geist_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c5">
                        <input name="attr_geist_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_erkennen'
        value='&{template:adz} {{title=Geist erkennen}} {{dice=[[@{calc_total_geist_erkennen}+0]]}} {{result=[[(@{calc_total_geist_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c6">
                        <input name="attr_geist_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_erschaffen'
        value='&{template:adz} {{title=Geist erschaffen}} {{dice=[[@{calc_total_geist_erschaffen}+0]]}} {{result=[[(@{calc_total_geist_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c7">
                        <input name="attr_geist_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_kooperieren'
        value='&{template:adz} {{title=Geist kooperieren}} {{dice=[[@{calc_total_geist_kooperieren}+0]]}} {{result=[[(@{calc_total_geist_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c8">
                        <input name="attr_geist_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_modifizieren'
        value='&{template:adz} {{title=Geist modifizieren}} {{dice=[[@{calc_total_geist_modifizieren}+0]]}} {{result=[[(@{calc_total_geist_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c9">
                        <input name="attr_geist_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_verankern'
        value='&{template:adz} {{title=Geist verankern}} {{dice=[[@{calc_total_geist_verankern}+0]]}} {{result=[[(@{calc_total_geist_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c10">
                        <input name="attr_geist_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_versetzen'
        value='&{template:adz} {{title=Geist versetzen}} {{dice=[[@{calc_total_geist_versetzen}+0]]}} {{result=[[(@{calc_total_geist_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r5 c1"></div>
                
                    
                    <div class="horizontal node r5 c11">
                        <input name="attr_geist_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_geist_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_geist_zerstören'
        value='&{template:adz} {{title=Geist zerstören}} {{dice=[[@{calc_total_geist_zerstören}+0]]}} {{result=[[(@{calc_total_geist_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r5 c1"></div>
                
            
                
                <label class="domain r6 c1">Humanoid</label>
                <input class="r6 c2" type="number" step="1" name="attr_humanoid" max="10"/>
                <div class="r6 c3">
                    

<button type='roll'
        name='roll_roll-drain-Humanoid'
        value='&{template:adz} {{title=Entzug (Humanoid)}} {{dice=[[@{calc_drain_humanoid}+0]]}} {{result=[[(@{calc_drain_humanoid}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r6 c4">
                        <input name="attr_humanoid_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_beherrschen'
        value='&{template:adz} {{title=Humanoid beherrschen}} {{dice=[[@{calc_total_humanoid_beherrschen}+0]]}} {{result=[[(@{calc_total_humanoid_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c5">
                        <input name="attr_humanoid_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_erkennen'
        value='&{template:adz} {{title=Humanoid erkennen}} {{dice=[[@{calc_total_humanoid_erkennen}+0]]}} {{result=[[(@{calc_total_humanoid_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c6">
                        <input name="attr_humanoid_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_erschaffen'
        value='&{template:adz} {{title=Humanoid erschaffen}} {{dice=[[@{calc_total_humanoid_erschaffen}+0]]}} {{result=[[(@{calc_total_humanoid_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c7">
                        <input name="attr_humanoid_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_kooperieren'
        value='&{template:adz} {{title=Humanoid kooperieren}} {{dice=[[@{calc_total_humanoid_kooperieren}+0]]}} {{result=[[(@{calc_total_humanoid_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c8">
                        <input name="attr_humanoid_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_modifizieren'
        value='&{template:adz} {{title=Humanoid modifizieren}} {{dice=[[@{calc_total_humanoid_modifizieren}+0]]}} {{result=[[(@{calc_total_humanoid_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c9">
                        <input name="attr_humanoid_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_verankern'
        value='&{template:adz} {{title=Humanoid verankern}} {{dice=[[@{calc_total_humanoid_verankern}+0]]}} {{result=[[(@{calc_total_humanoid_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c10">
                        <input name="attr_humanoid_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_versetzen'
        value='&{template:adz} {{title=Humanoid versetzen}} {{dice=[[@{calc_total_humanoid_versetzen}+0]]}} {{result=[[(@{calc_total_humanoid_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r6 c1"></div>
                
                    
                    <div class="horizontal node r6 c11">
                        <input name="attr_humanoid_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_humanoid_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_humanoid_zerstören'
        value='&{template:adz} {{title=Humanoid zerstören}} {{dice=[[@{calc_total_humanoid_zerstören}+0]]}} {{result=[[(@{calc_total_humanoid_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r6 c1"></div>
                
            
                
                <label class="domain r7 c1">Kraft</label>
                <input class="r7 c2" type="number" step="1" name="attr_kraft" max="10"/>
                <div class="r7 c3">
                    

<button type='roll'
        name='roll_roll-drain-Kraft'
        value='&{template:adz} {{title=Entzug (Kraft)}} {{dice=[[@{calc_drain_kraft}+0]]}} {{result=[[(@{calc_drain_kraft}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r7 c4">
                        <input name="attr_kraft_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_beherrschen'
        value='&{template:adz} {{title=Kraft beherrschen}} {{dice=[[@{calc_total_kraft_beherrschen}+0]]}} {{result=[[(@{calc_total_kraft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c5">
                        <input name="attr_kraft_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_erkennen'
        value='&{template:adz} {{title=Kraft erkennen}} {{dice=[[@{calc_total_kraft_erkennen}+0]]}} {{result=[[(@{calc_total_kraft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c6">
                        <input name="attr_kraft_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_erschaffen'
        value='&{template:adz} {{title=Kraft erschaffen}} {{dice=[[@{calc_total_kraft_erschaffen}+0]]}} {{result=[[(@{calc_total_kraft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c7">
                        <input name="attr_kraft_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_kooperieren'
        value='&{template:adz} {{title=Kraft kooperieren}} {{dice=[[@{calc_total_kraft_kooperieren}+0]]}} {{result=[[(@{calc_total_kraft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c8">
                        <input name="attr_kraft_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_modifizieren'
        value='&{template:adz} {{title=Kraft modifizieren}} {{dice=[[@{calc_total_kraft_modifizieren}+0]]}} {{result=[[(@{calc_total_kraft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c9">
                        <input name="attr_kraft_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_verankern'
        value='&{template:adz} {{title=Kraft verankern}} {{dice=[[@{calc_total_kraft_verankern}+0]]}} {{result=[[(@{calc_total_kraft_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c10">
                        <input name="attr_kraft_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_versetzen'
        value='&{template:adz} {{title=Kraft versetzen}} {{dice=[[@{calc_total_kraft_versetzen}+0]]}} {{result=[[(@{calc_total_kraft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r7 c1"></div>
                
                    
                    <div class="horizontal node r7 c11">
                        <input name="attr_kraft_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_kraft_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_kraft_zerstören'
        value='&{template:adz} {{title=Kraft zerstören}} {{dice=[[@{calc_total_kraft_zerstören}+0]]}} {{result=[[(@{calc_total_kraft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r7 c1"></div>
                
            
                
                <label class="domain r8 c1">Luft</label>
                <input class="r8 c2" type="number" step="1" name="attr_luft" max="10"/>
                <div class="r8 c3">
                    

<button type='roll'
        name='roll_roll-drain-Luft'
        value='&{template:adz} {{title=Entzug (Luft)}} {{dice=[[@{calc_drain_luft}+0]]}} {{result=[[(@{calc_drain_luft}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r8 c4">
                        <input name="attr_luft_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_beherrschen'
        value='&{template:adz} {{title=Luft beherrschen}} {{dice=[[@{calc_total_luft_beherrschen}+0]]}} {{result=[[(@{calc_total_luft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c5">
                        <input name="attr_luft_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_erkennen'
        value='&{template:adz} {{title=Luft erkennen}} {{dice=[[@{calc_total_luft_erkennen}+0]]}} {{result=[[(@{calc_total_luft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c6">
                        <input name="attr_luft_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_erschaffen'
        value='&{template:adz} {{title=Luft erschaffen}} {{dice=[[@{calc_total_luft_erschaffen}+0]]}} {{result=[[(@{calc_total_luft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c7">
                        <input name="attr_luft_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_kooperieren'
        value='&{template:adz} {{title=Luft kooperieren}} {{dice=[[@{calc_total_luft_kooperieren}+0]]}} {{result=[[(@{calc_total_luft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c8">
                        <input name="attr_luft_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_modifizieren'
        value='&{template:adz} {{title=Luft modifizieren}} {{dice=[[@{calc_total_luft_modifizieren}+0]]}} {{result=[[(@{calc_total_luft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c9">
                        <input name="attr_luft_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_verankern'
        value='&{template:adz} {{title=Luft verankern}} {{dice=[[@{calc_total_luft_verankern}+0]]}} {{result=[[(@{calc_total_luft_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c10">
                        <input name="attr_luft_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_versetzen'
        value='&{template:adz} {{title=Luft versetzen}} {{dice=[[@{calc_total_luft_versetzen}+0]]}} {{result=[[(@{calc_total_luft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r8 c1"></div>
                
                    
                    <div class="horizontal node r8 c11">
                        <input name="attr_luft_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_luft_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_luft_zerstören'
        value='&{template:adz} {{title=Luft zerstören}} {{dice=[[@{calc_total_luft_zerstören}+0]]}} {{result=[[(@{calc_total_luft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r8 c1"></div>
                
            
                
                <label class="domain r9 c1">Metall</label>
                <input class="r9 c2" type="number" step="1" name="attr_metall" max="10"/>
                <div class="r9 c3">
                    

<button type='roll'
        name='roll_roll-drain-Metall'
        value='&{template:adz} {{title=Entzug (Metall)}} {{dice=[[@{calc_drain_metall}+0]]}} {{result=[[(@{calc_drain_metall}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r9 c4">
                        <input name="attr_metall_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_beherrschen'
        value='&{template:adz} {{title=Metall beherrschen}} {{dice=[[@{calc_total_metall_beherrschen}+0]]}} {{result=[[(@{calc_total_metall_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c5">
                        <input name="attr_metall_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_erkennen'
        value='&{template:adz} {{title=Metall erkennen}} {{dice=[[@{calc_total_metall_erkennen}+0]]}} {{result=[[(@{calc_total_metall_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c6">
                        <input name="attr_metall_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_erschaffen'
        value='&{template:adz} {{title=Metall erschaffen}} {{dice=[[@{calc_total_metall_erschaffen}+0]]}} {{result=[[(@{calc_total_metall_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c7">
                        <input name="attr_metall_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_kooperieren'
        value='&{template:adz} {{title=Metall kooperieren}} {{dice=[[@{calc_total_metall_kooperieren}+0]]}} {{result=[[(@{calc_total_metall_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c8">
                        <input name="attr_metall_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_modifizieren'
        value='&{template:adz} {{title=Metall modifizieren}} {{dice=[[@{calc_total_metall_modifizieren}+0]]}} {{result=[[(@{calc_total_metall_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c9">
                        <input name="attr_metall_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_verankern'
        value='&{template:adz} {{title=Metall verankern}} {{dice=[[@{calc_total_metall_verankern}+0]]}} {{result=[[(@{calc_total_metall_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c10">
                        <input name="attr_metall_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_versetzen'
        value='&{template:adz} {{title=Metall versetzen}} {{dice=[[@{calc_total_metall_versetzen}+0]]}} {{result=[[(@{calc_total_metall_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r9 c1"></div>
                
                    
                    <div class="horizontal node r9 c11">
                        <input name="attr_metall_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_metall_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_metall_zerstören'
        value='&{template:adz} {{title=Metall zerstören}} {{dice=[[@{calc_total_metall_zerstören}+0]]}} {{result=[[(@{calc_total_metall_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r9 c1"></div>
                
            
                
                <label class="domain r10 c1">Pflanze</label>
                <input class="r10 c2" type="number" step="1" name="attr_pflanze" max="10"/>
                <div class="r10 c3">
                    

<button type='roll'
        name='roll_roll-drain-Pflanze'
        value='&{template:adz} {{title=Entzug (Pflanze)}} {{dice=[[@{calc_drain_pflanze}+0]]}} {{result=[[(@{calc_drain_pflanze}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r10 c4">
                        <input name="attr_pflanze_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_beherrschen'
        value='&{template:adz} {{title=Pflanze beherrschen}} {{dice=[[@{calc_total_pflanze_beherrschen}+0]]}} {{result=[[(@{calc_total_pflanze_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c5">
                        <input name="attr_pflanze_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_erkennen'
        value='&{template:adz} {{title=Pflanze erkennen}} {{dice=[[@{calc_total_pflanze_erkennen}+0]]}} {{result=[[(@{calc_total_pflanze_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c6">
                        <input name="attr_pflanze_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_erschaffen'
        value='&{template:adz} {{title=Pflanze erschaffen}} {{dice=[[@{calc_total_pflanze_erschaffen}+0]]}} {{result=[[(@{calc_total_pflanze_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c7">
                        <input name="attr_pflanze_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_kooperieren'
        value='&{template:adz} {{title=Pflanze kooperieren}} {{dice=[[@{calc_total_pflanze_kooperieren}+0]]}} {{result=[[(@{calc_total_pflanze_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c8">
                        <input name="attr_pflanze_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_modifizieren'
        value='&{template:adz} {{title=Pflanze modifizieren}} {{dice=[[@{calc_total_pflanze_modifizieren}+0]]}} {{result=[[(@{calc_total_pflanze_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c9">
                        <input name="attr_pflanze_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_verankern'
        value='&{template:adz} {{title=Pflanze verankern}} {{dice=[[@{calc_total_pflanze_verankern}+0]]}} {{result=[[(@{calc_total_pflanze_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c10">
                        <input name="attr_pflanze_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_versetzen'
        value='&{template:adz} {{title=Pflanze versetzen}} {{dice=[[@{calc_total_pflanze_versetzen}+0]]}} {{result=[[(@{calc_total_pflanze_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r10 c1"></div>
                
                    
                    <div class="horizontal node r10 c11">
                        <input name="attr_pflanze_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_pflanze_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_pflanze_zerstören'
        value='&{template:adz} {{title=Pflanze zerstören}} {{dice=[[@{calc_total_pflanze_zerstören}+0]]}} {{result=[[(@{calc_total_pflanze_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r10 c1"></div>
                
            
                
                <label class="domain r11 c1">Tier</label>
                <input class="r11 c2" type="number" step="1" name="attr_tier" max="10"/>
                <div class="r11 c3">
                    

<button type='roll'
        name='roll_roll-drain-Tier'
        value='&{template:adz} {{title=Entzug (Tier)}} {{dice=[[@{calc_drain_tier}+0]]}} {{result=[[(@{calc_drain_tier}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r11 c4">
                        <input name="attr_tier_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_beherrschen'
        value='&{template:adz} {{title=Tier beherrschen}} {{dice=[[@{calc_total_tier_beherrschen}+0]]}} {{result=[[(@{calc_total_tier_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c5">
                        <input name="attr_tier_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_erkennen'
        value='&{template:adz} {{title=Tier erkennen}} {{dice=[[@{calc_total_tier_erkennen}+0]]}} {{result=[[(@{calc_total_tier_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c6">
                        <input name="attr_tier_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_erschaffen'
        value='&{template:adz} {{title=Tier erschaffen}} {{dice=[[@{calc_total_tier_erschaffen}+0]]}} {{result=[[(@{calc_total_tier_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c7">
                        <input name="attr_tier_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_kooperieren'
        value='&{template:adz} {{title=Tier kooperieren}} {{dice=[[@{calc_total_tier_kooperieren}+0]]}} {{result=[[(@{calc_total_tier_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c8">
                        <input name="attr_tier_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_modifizieren'
        value='&{template:adz} {{title=Tier modifizieren}} {{dice=[[@{calc_total_tier_modifizieren}+0]]}} {{result=[[(@{calc_total_tier_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c9">
                        <input name="attr_tier_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_verankern'
        value='&{template:adz} {{title=Tier verankern}} {{dice=[[@{calc_total_tier_verankern}+0]]}} {{result=[[(@{calc_total_tier_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c10">
                        <input name="attr_tier_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_versetzen'
        value='&{template:adz} {{title=Tier versetzen}} {{dice=[[@{calc_total_tier_versetzen}+0]]}} {{result=[[(@{calc_total_tier_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r11 c1"></div>
                
                    
                    <div class="horizontal node r11 c11">
                        <input name="attr_tier_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_tier_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_tier_zerstören'
        value='&{template:adz} {{title=Tier zerstören}} {{dice=[[@{calc_total_tier_zerstören}+0]]}} {{result=[[(@{calc_total_tier_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r11 c1"></div>
                
            
                
                <label class="domain r12 c1">Wasser</label>
                <input class="r12 c2" type="number" step="1" name="attr_wasser" max="10"/>
                <div class="r12 c3">
                    

<button type='roll'
        name='roll_roll-drain-Wasser'
        value='&{template:adz} {{title=Entzug (Wasser)}} {{dice=[[@{calc_drain_wasser}+0]]}} {{result=[[(@{calc_drain_wasser}+0)d6>5cs>5cf<0]]}}'>
</button>


                </div>
                
                    
                    <div class="horizontal node r12 c4">
                        <input name="attr_wasser_beherrschen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_beherrschen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_beherrschen'
        value='&{template:adz} {{title=Wasser beherrschen}} {{dice=[[@{calc_total_wasser_beherrschen}+0]]}} {{result=[[(@{calc_total_wasser_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c4"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c5">
                        <input name="attr_wasser_erkennen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_erkennen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_erkennen'
        value='&{template:adz} {{title=Wasser erkennen}} {{dice=[[@{calc_total_wasser_erkennen}+0]]}} {{result=[[(@{calc_total_wasser_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c5"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c6">
                        <input name="attr_wasser_erschaffen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_erschaffen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_erschaffen'
        value='&{template:adz} {{title=Wasser erschaffen}} {{dice=[[@{calc_total_wasser_erschaffen}+0]]}} {{result=[[(@{calc_total_wasser_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c6"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c7">
                        <input name="attr_wasser_kooperieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_kooperieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_kooperieren'
        value='&{template:adz} {{title=Wasser kooperieren}} {{dice=[[@{calc_total_wasser_kooperieren}+0]]}} {{result=[[(@{calc_total_wasser_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c7"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c8">
                        <input name="attr_wasser_modifizieren" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_modifizieren" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_modifizieren'
        value='&{template:adz} {{title=Wasser modifizieren}} {{dice=[[@{calc_total_wasser_modifizieren}+0]]}} {{result=[[(@{calc_total_wasser_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c8"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c9">
                        <input name="attr_wasser_verankern" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_verankern" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_verankern'
        value='&{template:adz} {{title=Wasser verankern}} {{dice=[[@{calc_total_wasser_verankern}+0]]}} {{result=[[(@{calc_total_wasser_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c9"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c10">
                        <input name="attr_wasser_versetzen" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_versetzen" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_versetzen'
        value='&{template:adz} {{title=Wasser versetzen}} {{dice=[[@{calc_total_wasser_versetzen}+0]]}} {{result=[[(@{calc_total_wasser_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c10"></div>
                    <div class="row-marker r12 c1"></div>
                
                    
                    <div class="horizontal node r12 c11">
                        <input name="attr_wasser_zerstören" type="number" step="1" max="10" />
                        <div class="stack clickable-total">
                            <input name="attr_calc_total_wasser_zerstören" class="number" readonly="true" />
                            

<button type='roll'
        name='roll_wasser_zerstören'
        value='&{template:adz} {{title=Wasser zerstören}} {{dice=[[@{calc_total_wasser_zerstören}+0]]}} {{result=[[(@{calc_total_wasser_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>


                        </div>
                    </div>
                    <div class="column-marker r1 c11"></div>
                    <div class="row-marker r12 c1"></div>
                
            
        </div>
    </div>

    <rolltemplate class="sheet-rolltemplate-adz">
        <div class="sheet-scroll">
            <h1>{{title}}</h1>

            {{#dice}}
                <p>
                    {{result}}
                    Erfolg{{#^rollTotal() result 1}}e{{/^rollTotal() result 1}}
                    mit
                    <span class="plain-roll transparent-roll">{{dice}}</span>
                    Würfel{{#^rollTotal() dice 1}}n{{/^rollTotal() dice 1}}
                </p>
                {{#penalty}}
                    <p class="note">Erfolgsabzug von {{penalty}} berücksichtigt.</p>
                {{/penalty}}
                {{^penalty}}
                    <p class="note">Erfolgsabzug ignoriert.</p>
                {{/penalty}}
            {{/dice}}
            {{^dice}}
                <p class="large transparent-roll">{{result}}</p>
            {{/dice}}
        </div>
    </rolltemplate>

</div>


<script type="text/worker">
var attributes = ["kk", "ko", "ge", "ff", "kl", "wk", "in", "ch", "gl"];

var drainAttributes = ["kl", "wk", "in", "ch"];

var techniques = ["beherrschen", "erkennen", "erschaffen", "kooperieren", "modifizieren", "verankern", "versetzen", "zerstören"];

var domains = ["darstellung", "erde", "feuer", "geist", "humanoid", "kraft", "luft", "metall", "pflanze", "tier", "wasser"];

const DOMAINS_AND_DRAIN_RELATED = ["drain_attribute"].concat(drainAttributes, domains);
const MAGIC_MATRIX_INPUT = DOMAINS_AND_DRAIN_RELATED.concat(techniques);

function getIntegersFrom(values) {
    let result = {};
    for (const key of Object.keys(values)) {
        result[key] = parseInt(values[key]) || 0;
    }
    return result;
}

for (const abbreviation of attributes) {
    addAttributeListener(abbreviation);
}

function addAttributeListener(abbreviation) {
    on("sheet:opened change:" + abbreviation, function() {
        console.log("attribute change:", abbreviation);
        getAttrs([abbreviation].concat(DOMAINS_AND_DRAIN_RELATED), function(values) {
            let integers = getIntegersFrom(values);

            let result = {};

            var total = "";
            if (integers[abbreviation]) {
                total = integers[abbreviation] * 2;
            }
            result["calc_total_" + abbreviation] = total;

            let drainAttributeAbbreviation = values.drain_attribute;
            if (drainAttributeAbbreviation === abbreviation) {
                console.log("recalculating drain");
                calculateAllDrainRolls(integers, drainAttributeAbbreviation, result);
            }

            setAttrs(result);

            // FIXME recalculate skill values due to attribute change
        });
    });
}

on("sheet:opened", function() {
    getSectionIDsOrdered("repeating_skills", function(ids) {
        skillIdOrder = ids;

        let valueIds = ids.map(id => "repeating_skills_" + id + "_value");
        let attributeIds = ids.map(id => "repeating_skills_" + id + "_attribute");
        let nameIds = ids.map(id => "repeating_skills_" + id + "_name");
        var inputAttributes = valueIds.concat(attributeIds).concat(nameIds);
        bulkCalculateSkills(inputAttributes);

        var newAttributes = {};
        for (let i = ids.length; i < 16; i++) {
            var newId = generateRowID();
            newAttributes["repeating_skills_" + newId + "_attribute"] = "-";
        }
        setAttrs(newAttributes);

        // Note: calculation of magic cells and drain values is triggered by a separate sheet:opened listener per domain
    });
});

var skillIdOrder = [];

on("clicked:add-skills", function() {
    var newAttributes = {};

    function add() {
        const id = generateRowID();
        newAttributes["repeating_skills_" + id + "_attribute"] = "-";
        skillIdOrder.push(id.toLowerCase());
    }
    add();
    add();

    setAttrs(newAttributes);
    console.debug("add-skills - new skillIdOrder:", skillIdOrder);
});

on("change:repeating_skills", function(eventInfo) {
    console.log("change:", eventInfo.sourceAttribute);
    if (/_(value|attribute)$/.test(eventInfo.sourceAttribute)) {
        console.debug("change", eventInfo);

        let inputAttributes = ["_value", "_attribute", "_name"].map(s => eventInfo.triggerName + s);
        bulkCalculateSkills(inputAttributes);
    } else if (/_name$/.test(eventInfo.sourceAttribute)) {
        console.debug("rename", eventInfo);

        if (eventInfo.previousValue == "Reflexe") {
            setAttrs({ "calc_symlink_Reflexe": "" });
        } else if (eventInfo.newValue == "Reflexe") {
            var valueId = eventInfo.sourceAttribute.replace("_name", "_value");
            getAttrs([valueId], function(values) {
                setAttrs({ "calc_symlink_Reflexe": values[valueId] });
            });
        }
    }
});

on("change:_reporder:skills", function(eventInfo) {
    console.debug("change:_reporder:skills - eventInfo:", eventInfo);
    if (eventInfo.newValue) {
        skillIdOrder = eventInfo.newValue.toLowerCase().split(',');
        console.debug("change:_reporder:skills - new skillIdOrder:", skillIdOrder);
    } else {
        console.debug("change:_reporder:skills - event includes no ordering info");
        refreshSkillOrder();
    }
});

on("remove:repeating_skills", function(eventInfo) {
    console.debug("remove:repeating_skills - eventInfo:", eventInfo);

    const removedId = eventInfo.sourceAttribute.match(/^repeating_skills_([^_]+)$/)[1];
    console.info("removedId:", removedId);

    // Store last two skill IDs before updating skillIdOrder
    const lastTwoSkillIds = skillIdOrder.slice(-2);
    console.info("last 2 skills:", lastTwoSkillIds);

    getSectionIDsOrdered("repeating_skills", function(ids) {
        skillIdOrder = ids;
        console.debug("new skillIdOrder:", skillIdOrder);

        const count = ids.length;
        if (count < 16) {
            const newId = addBalancingSkillRow();
            console.info(`user removed a row; appending ${newId} to keep minimum row count`);
        } else if (count % 2 == 1) {
            if (lastTwoSkillIds.includes(removedId.toLowerCase())) {
                console.info(`user removed row ${removedId}, one of the last two rows. balance columns by removing the other row (if empty) or add a new one`);
                const otherRowId = lastTwoSkillIds.filter((lowerId) => lowerId != removedId.toLowerCase())[0];
                balanceSkillRowsAfterTailRemoval(otherRowId);
            } else {
                console.info("user removed non-tail row; appending a new one to keep columns balanced");
                addBalancingSkillRow();
            }
        }
    });

    const nameKey = Object.keys(eventInfo.removedInfo).filter(key => key.endsWith("_name"))[0];
    if (eventInfo.removedInfo[nameKey] == "Reflexe") {
        setAttrs({ "calc_symlink_Reflexe": "" });
    }
});

function balanceSkillRowsAfterTailRemoval(rowId) {
    const ids = ["name", "value"].map(suffix => "repeating_skills_" + rowId + "_" + suffix);
    getAttrs(ids, function(values) {
        const rowIsEmpty = Object.values(values).every((element) => element.length == 0);
        if (rowIsEmpty) {
            console.info(`other row ${rowId} is empty, too - removing.`);
            removeRepeatingRow(`repeating_skills_${rowId}`);
            refreshSkillOrder();
        } else {
            const newId = addBalancingSkillRow();
            console.info(`not removing the remaining non-empty row ${rowId}. keeping columns balanced by adding new row ${newId}.`);
        }
    });
}

function refreshSkillOrder() {
    getSectionIDsOrdered("repeating_skills", function(ids) {
        skillIdOrder = ids;
        console.debug("refreshSkillOrder - new skillIdOrder:", skillIdOrder);
    });
}

function addBalancingSkillRow() {
    var newId = generateRowID();
    console.debug(`addBalancingSkillRow - newId:${newId}`);
    var newAttributes = {};
    newAttributes[`repeating_skills_${newId}_attribute`] = "-";
    setAttrs(newAttributes);

    skillIdOrder.push(newId.toLowerCase());
    console.debug("addBalancingSkillRow - new skillIdOrder:", skillIdOrder);
    return newId;
}

function getSectionIDsOrdered(sectionName, callback) {
    'use strict';
    getAttrs([`_reporder_${sectionName}`], function (v) {
        getSectionIDs(sectionName, function (idArray) {
            let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
                ids = [...new Set(reporderArray.filter(x => idArray.includes(x)).concat(idArray))];
            callback(ids);
        });
    });
};

function bulkCalculateSkills(inputAttributes) {
    getAttrs(inputAttributes.concat(attributes), function(values) {
        console.debug("bulkCalculateSkills with values", values);
        let result = {};
        for (const key of Object.keys(values).filter(key => key.endsWith("_value"))) {
            let prefix = key.replace("_value", "");
            calculateSkill(values, prefix, result);
        }
        console.log("bulk skill calculation result:", result);
        setAttrs(result);
    });
}

function calculateSkill(values, prefix, target) {
    let rawValue = values[prefix + "_value"];
    let value = parseInt(rawValue) || 0;

    const name = values[prefix + "_name"];
    if (name == "Reflexe") {
        target["calc_symlink_" + name] = value;
    }

    let attributeAbbreviation = values[prefix + "_attribute"];

    let result = 0;
    if (attributeAbbreviation != "-") {
        let attributeRawValue = values[attributeAbbreviation];
        let attributeValue = parseInt(attributeRawValue) || 0;

        console.log("calculate " + prefix + " based on values: ", values);
        result = attributeValue + value;
    }
    target[prefix + "_calc_total"] = result;
}


on("sheet:opened change:in change:calc_symlink_reflexe", function(eventInfo) {
    console.log("initiative base change:", eventInfo.sourceAttribute);
    getAttrs(["in", "calc_symlink_Reflexe"], function(values) {
        var base = 0;
        for (const value of Object.values(values)) {
            base += parseInt(value) * 2;
        }
        console.log("base=", base);
        setAttrs({ "calc_initiative_base": base });
    });
});

for (const domain of domains) {
    addRowListener(domain);
    for (const technique of techniques) {
        addCellListener(domain, technique);
    }
}

for (const technique of techniques) {
    addColumnListener(technique);
}

function addCellListener(domain, technique) {
    var combination = domain + "_" + technique;
    on("change:" + combination, function() {
        console.log("cell change", domain, technique);
        getAttrs([domain, technique, combination], function(values) {
            let integers = getIntegersFrom(values);
            let result = {};
            calculateMagicCell(integers, domain, technique, result);
            setAttrs(result);
        });
    });
}

function addRowListener(domainName) {
    var inputAttributes = MAGIC_MATRIX_INPUT.concat(techniques.map(techniqueName => domainName + '_' + techniqueName));
    on("sheet:opened change:" + domainName, function() {
        console.log("row change", domainName);
        getAttrs(inputAttributes, function(values) {
            let integers = getIntegersFrom(values);
            let result = {};

            for (const techniqueName of techniques) {
                calculateMagicCell(integers, domainName, techniqueName, result);
            }

            calculateDrainRoll(integers, domainName, values.drain_attribute, result);

            setAttrs(result);
        });
    });
}

function addColumnListener(technique) {
    var inputAttributes = [technique].concat(domains, domains.map(domain => domain + "_" + technique));
    on("change:" + technique, function() {
        console.log("column change", technique);
        getAttrs(inputAttributes, function(values) {
            let integers = getIntegersFrom(values);
            let result = {};
            for (const domain of domains) {
                calculateMagicCell(integers, domain, technique, result);
            }
            setAttrs(result);
        });
    });
}

function calculateMagicCell(integers, domain, technique, result) {
    var total = "";
    if (integers[domain] && integers[technique]) {
        total = integers[domain] + integers[technique] + integers[domain + "_" + technique];
    }
    result["calc_total_" + domain + "_" + technique] = total;
}

on("sheet:opened change:drain_attribute", function(eventInfo) {
    getAttrs(DOMAINS_AND_DRAIN_RELATED, function(values) {
        let integers = getIntegersFrom(values);
        let drainAttributeAbbreviation = values.drain_attribute;
        console.log(
            `calculating drain based on attribute ${drainAttributeAbbreviation}=${integers[drainAttributeAbbreviation]}`,
            eventInfo);

        let result = {};
        calculateAllDrainRolls(integers, drainAttributeAbbreviation, result);
        setAttrs(result);
    });
});

function calculateAllDrainRolls(integers, drainAttributeAbbreviation, resultAttributes) {
    for (const domainName of domains) {
        calculateDrainRoll(integers, domainName, drainAttributeAbbreviation, resultAttributes);
    }
}

function calculateDrainRoll(integers, domainName, drainAttributeAbbreviation, resultAttributes) {
    resultAttributes["calc_drain_" + domainName] = integers[domainName] + integers[drainAttributeAbbreviation];
}

console.log("AdZ sheetworker initialized");

</script>
