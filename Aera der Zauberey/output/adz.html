

<input class="sheet-character-name" type="hidden" name="attr_character_name" />
<div class="sheet-layout">
    <div class="sheet-basics">
    <label>Name</label>
    <input type="text" name="attr_character_name" />

    <label>Erfolgsabzug</label>
    <input type="number" step="1" name="attr_penalty" class="sheet-variable" value="0"/>
    

<div class="toggle-container">
  <input type="hidden" class="toggle" name="attr_apply_penalty" />
  <button type="action" name="act_toggle_apply_penalty" class="toggle">
    <span class="checked">&#x1f494; Aktiv</span>
    <span class="unchecked">&#x1f90d; Inaktiv</span>
  </button>
</div>



    <label>Sonstige Probe</label>
    

<button type='roll'
        name='roll_custom-roll'
        value='&{template:adz} {{title=?{Titel|Probe}}} {{dice=[[?{Würfelanzahl|1}+0]]}} {{result=[[(?{Würfelanzahl|1}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>



    <label>Initiativewurf</label>
    <button type='roll'
            name='roll_initiative'
            value='&{template:adz} {{title=Initiative}} {{result=[[@{calc_initiative_base} + 2d6cs>7cf<0]]}}'>
    </button>
    <input name="attr_calc_initiative_base" class="number" readonly="true" />

    <label>Glück dazuwürfeln</label>
    <div class="penalty-free-cell">
        

<button type='roll'
        name='roll_use-luck'
        value='&{template:adz} {{title=＋ Glück}} {{dice=[[@{gl}+0]]}} {{result=[[(@{gl}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


        <span class="hint">&#x1f90d;</span>
    </div>

    <label>Entzugsattribut</label>
    <select name="attr_drain_attribute">
        
            <option value="kl">Klugheit</option>
        
            <option value="wk">Willenskraft</option>
        
            <option value="in">Intuition</option>
        
            <option value="ch">Charisma</option>
        
    </select>
</div>

<div class="sheet-notes">
    <label>Notizen</label>
    <textarea name="attr_character_notes"></textarea>
</div>

<div class="sheet-attributes">
    <h2>Attribute 

<div class="toggle-container">
  <input type="hidden" class="toggle" name="attr_apply_penalty" />
  <button type="action" name="act_toggle_apply_penalty" class="toggle">
    <span class="checked">&#x1f494; mit Abzug (<span name=attr_penalty></span>)</span>
    <span class="unchecked">&#x1f90d; kein Abzug (<span name=attr_penalty></span>)</span>
  </button>
</div>

</h2>

    <div class="sheet-attributes-list">
        
        

<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Körperkraft</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_kk" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_kk" class="number" readonly="true" />
                

<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Konstitution</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_ko" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_ko" class="number" readonly="true" />
                

<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Gewandtheit</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_ge" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_ge" class="number" readonly="true" />
                

<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Fingerfertigkeit</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_ff" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_ff" class="number" readonly="true" />
                

<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Klugheit</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_kl" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_kl" class="number" readonly="true" />
                

<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Willenskraft</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_wk" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_wk" class="number" readonly="true" />
                

<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Intuition</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_in" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_in" class="number" readonly="true" />
                

<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Charisma</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_ch" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_ch" class="number" readonly="true" />
                

<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
        

<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'
        class="labelled">
    <label>Glück</label>
</button>


        <div class="horizontal">
            <input type="number" step="1" name="attr_gl" max="10"/>
            <div class="stack clickable-total">
                <input name="attr_calc_total_gl" class="number" readonly="true" />
                

<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div>
        
    </div>
</div>

<div class="sheet-skills">
    <h2>Fertigkeiten 

<div class="toggle-container">
  <input type="hidden" class="toggle" name="attr_apply_penalty" />
  <button type="action" name="act_toggle_apply_penalty" class="toggle">
    <span class="checked">&#x1f494; mit Abzug (<span name=attr_penalty></span>)</span>
    <span class="unchecked">&#x1f90d; kein Abzug (<span name=attr_penalty></span>)</span>
  </button>
</div>

</h2>

    <div class="skill-list">
        <fieldset class="repeating_skills">
          <input type="text" name="attr_name" />
          <select name="attr_attribute">
            <option value="-">-</option>
            
            <option value="kk">KK</option>
            
            <option value="ko">KO</option>
            
            <option value="ge">GE</option>
            
            <option value="ff">FF</option>
            
            <option value="kl">KL</option>
            
            <option value="wk">WK</option>
            
            <option value="in">IN</option>
            
            <option value="ch">CH</option>
            
            <option value="gl">GL</option>
            
          </select>
          <input type="number" name="attr_value" />
          

            <div class="stack clickable-total">
                <input name="attr_calc_total" class="number" readonly="true" />
                

<button type='roll'
        name='roll_@{name}'
        value='&{template:adz} {{title=@{name}}} {{dice=[[@{calc_total}+0]]}} {{result=[[(@{calc_total}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </fieldset>
        <button type="action" name="act_add-skills">Add Row</button>
    </div>
</div>

<div class="sheet-checks-heading no-bottom-padding">
    <h2>Sonstige Proben 

<div class="toggle-container">
  <input type="hidden" class="toggle" name="attr_apply_penalty" />
  <button type="action" name="act_toggle_apply_penalty" class="toggle">
    <span class="checked">&#x1f494; mit Abzug (<span name=attr_penalty></span>)</span>
    <span class="unchecked">&#x1f90d; kein Abzug (<span name=attr_penalty></span>)</span>
  </button>
</div>

</h2>
</div>

<div class="standard-checks"><div>
            <input type="text" value="Sich erinnern (KL + WK)" readonly="true" />
            <div class="stack clickable-total">
                <input name="attr_calc_check_remember" class="number" readonly="true" />
                

<button type='roll'
        name='roll_remember'
        value='&{template:adz} {{title=Sich erinnern}} {{dice=[[@{calc_check_remember}+0]]}} {{result=[[(@{calc_check_remember}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div><div>
            <input type="text" value="Selbstbeherrschung (KO + WK)" readonly="true" />
            <div class="stack clickable-total">
                <input name="attr_calc_check_selfcontrol" class="number" readonly="true" />
                

<button type='roll'
        name='roll_selfcontrol'
        value='&{template:adz} {{title=Selbstbeherrschung}} {{dice=[[@{calc_check_selfcontrol}+0]]}} {{result=[[(@{calc_check_selfcontrol}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div><div>
            <input type="text" value="Lernen (KL + IN)" readonly="true" />
            <div class="stack clickable-total">
                <input name="attr_calc_check_learning" class="number" readonly="true" />
                

<button type='roll'
        name='roll_learning'
        value='&{template:adz} {{title=Lernen}} {{dice=[[@{calc_check_learning}+0]]}} {{result=[[(@{calc_check_learning}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div><div>
            <input type="text" value="Sturheit (WK + CH)" readonly="true" />
            <div class="stack clickable-total">
                <input name="attr_calc_check_stubbornness" class="number" readonly="true" />
                

<button type='roll'
        name='roll_stubbornness'
        value='&{template:adz} {{title=Sturheit}} {{dice=[[@{calc_check_stubbornness}+0]]}} {{result=[[(@{calc_check_stubbornness}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


            </div>
        </div></div>

<div class="custom-checks">
    <fieldset class="repeating_checks">
      <input type="text" name="attr_name" />
      <input type="number" name="attr_value" />
        <div class="stack clickable-total">
            <input name="attr_value" class="number" readonly="true" />
            

<button type='roll'
        name='roll_@{name}'
        value='&{template:adz} {{title=@{name}}} {{dice=[[@{value}+0]]}} {{result=[[(@{value}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


        </div>
    </fieldset>
    <button type="action" name="act_add-checks">Add Row</button>
</div>

<div class="sheet-magic">
    <h2>Techniken & Magiebereiche 

<div class="toggle-container">
  <input type="hidden" class="toggle" name="attr_apply_penalty" />
  <button type="action" name="act_toggle_apply_penalty" class="toggle">
    <span class="checked">&#x1f494; mit Abzug (<span name=attr_penalty></span>)</span>
    <span class="unchecked">&#x1f90d; kein Abzug (<span name=attr_penalty></span>)</span>
  </button>
</div>

</h2>

    <div class="sheet-magic-matrix">
        <div></div>
        <div></div>
        <div class="vertical r1 c3">
            <label>Entzug</label>
        </div>
        
            <div class="vertical technique r1 c4">
                <label>Beherrschen</label>
                <input name="attr_beherrschen" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c5">
                <label>Erkennen</label>
                <input name="attr_erkennen" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c6">
                <label>Erschaffen</label>
                <input name="attr_erschaffen" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c7">
                <label>Kooperieren</label>
                <input name="attr_kooperieren" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c8">
                <label>Modifizieren</label>
                <input name="attr_modifizieren" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c9">
                <label>Verankern</label>
                <input name="attr_verankern" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c10">
                <label>Versetzen</label>
                <input name="attr_versetzen" type="number" step="1" max="10"/>
            </div>
        
            <div class="vertical technique r1 c11">
                <label>Zerstören</label>
                <input name="attr_zerstören" type="number" step="1" max="10"/>
            </div>
        
        
            
            <label class="domain r2 c1">Darstellung</label>
            <input class="r2 c2" type="number" step="1" name="attr_darstellung" max="10"/>
            <div class="r2 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Darstellung'
        value='&{template:adz} {{title=Entzug (Darstellung)}} {{dice=[[@{calc_drain_darstellung}+0]]}} {{result=[[(@{calc_drain_darstellung}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r2 c4">
                    <input name="attr_darstellung_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_beherrschen'
        value='&{template:adz} {{title=Darstellung beherrschen}} {{dice=[[@{calc_total_darstellung_beherrschen}+0]]}} {{result=[[(@{calc_total_darstellung_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c5">
                    <input name="attr_darstellung_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_erkennen'
        value='&{template:adz} {{title=Darstellung erkennen}} {{dice=[[@{calc_total_darstellung_erkennen}+0]]}} {{result=[[(@{calc_total_darstellung_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c6">
                    <input name="attr_darstellung_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_erschaffen'
        value='&{template:adz} {{title=Darstellung erschaffen}} {{dice=[[@{calc_total_darstellung_erschaffen}+0]]}} {{result=[[(@{calc_total_darstellung_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c7">
                    <input name="attr_darstellung_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_kooperieren'
        value='&{template:adz} {{title=Darstellung kooperieren}} {{dice=[[@{calc_total_darstellung_kooperieren}+0]]}} {{result=[[(@{calc_total_darstellung_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c8">
                    <input name="attr_darstellung_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_modifizieren'
        value='&{template:adz} {{title=Darstellung modifizieren}} {{dice=[[@{calc_total_darstellung_modifizieren}+0]]}} {{result=[[(@{calc_total_darstellung_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c9">
                    <input name="attr_darstellung_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_verankern'
        value='&{template:adz} {{title=Darstellung verankern}} {{dice=[[@{calc_total_darstellung_verankern}+0]]}} {{result=[[(@{calc_total_darstellung_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c10">
                    <input name="attr_darstellung_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_versetzen'
        value='&{template:adz} {{title=Darstellung versetzen}} {{dice=[[@{calc_total_darstellung_versetzen}+0]]}} {{result=[[(@{calc_total_darstellung_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r2 c1"></div>
            
                
                <div class="horizontal node r2 c11">
                    <input name="attr_darstellung_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_darstellung_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_darstellung_zerstören'
        value='&{template:adz} {{title=Darstellung zerstören}} {{dice=[[@{calc_total_darstellung_zerstören}+0]]}} {{result=[[(@{calc_total_darstellung_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r2 c1"></div>
            
        
            
            <label class="domain r3 c1">Erde</label>
            <input class="r3 c2" type="number" step="1" name="attr_erde" max="10"/>
            <div class="r3 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Erde'
        value='&{template:adz} {{title=Entzug (Erde)}} {{dice=[[@{calc_drain_erde}+0]]}} {{result=[[(@{calc_drain_erde}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r3 c4">
                    <input name="attr_erde_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_beherrschen'
        value='&{template:adz} {{title=Erde beherrschen}} {{dice=[[@{calc_total_erde_beherrschen}+0]]}} {{result=[[(@{calc_total_erde_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c5">
                    <input name="attr_erde_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_erkennen'
        value='&{template:adz} {{title=Erde erkennen}} {{dice=[[@{calc_total_erde_erkennen}+0]]}} {{result=[[(@{calc_total_erde_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c6">
                    <input name="attr_erde_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_erschaffen'
        value='&{template:adz} {{title=Erde erschaffen}} {{dice=[[@{calc_total_erde_erschaffen}+0]]}} {{result=[[(@{calc_total_erde_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c7">
                    <input name="attr_erde_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_kooperieren'
        value='&{template:adz} {{title=Erde kooperieren}} {{dice=[[@{calc_total_erde_kooperieren}+0]]}} {{result=[[(@{calc_total_erde_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c8">
                    <input name="attr_erde_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_modifizieren'
        value='&{template:adz} {{title=Erde modifizieren}} {{dice=[[@{calc_total_erde_modifizieren}+0]]}} {{result=[[(@{calc_total_erde_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c9">
                    <input name="attr_erde_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_verankern'
        value='&{template:adz} {{title=Erde verankern}} {{dice=[[@{calc_total_erde_verankern}+0]]}} {{result=[[(@{calc_total_erde_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c10">
                    <input name="attr_erde_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_versetzen'
        value='&{template:adz} {{title=Erde versetzen}} {{dice=[[@{calc_total_erde_versetzen}+0]]}} {{result=[[(@{calc_total_erde_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r3 c1"></div>
            
                
                <div class="horizontal node r3 c11">
                    <input name="attr_erde_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_erde_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_erde_zerstören'
        value='&{template:adz} {{title=Erde zerstören}} {{dice=[[@{calc_total_erde_zerstören}+0]]}} {{result=[[(@{calc_total_erde_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r3 c1"></div>
            
        
            
            <label class="domain r4 c1">Feuer</label>
            <input class="r4 c2" type="number" step="1" name="attr_feuer" max="10"/>
            <div class="r4 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Feuer'
        value='&{template:adz} {{title=Entzug (Feuer)}} {{dice=[[@{calc_drain_feuer}+0]]}} {{result=[[(@{calc_drain_feuer}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r4 c4">
                    <input name="attr_feuer_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_beherrschen'
        value='&{template:adz} {{title=Feuer beherrschen}} {{dice=[[@{calc_total_feuer_beherrschen}+0]]}} {{result=[[(@{calc_total_feuer_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c5">
                    <input name="attr_feuer_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_erkennen'
        value='&{template:adz} {{title=Feuer erkennen}} {{dice=[[@{calc_total_feuer_erkennen}+0]]}} {{result=[[(@{calc_total_feuer_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c6">
                    <input name="attr_feuer_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_erschaffen'
        value='&{template:adz} {{title=Feuer erschaffen}} {{dice=[[@{calc_total_feuer_erschaffen}+0]]}} {{result=[[(@{calc_total_feuer_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c7">
                    <input name="attr_feuer_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_kooperieren'
        value='&{template:adz} {{title=Feuer kooperieren}} {{dice=[[@{calc_total_feuer_kooperieren}+0]]}} {{result=[[(@{calc_total_feuer_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c8">
                    <input name="attr_feuer_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_modifizieren'
        value='&{template:adz} {{title=Feuer modifizieren}} {{dice=[[@{calc_total_feuer_modifizieren}+0]]}} {{result=[[(@{calc_total_feuer_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c9">
                    <input name="attr_feuer_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_verankern'
        value='&{template:adz} {{title=Feuer verankern}} {{dice=[[@{calc_total_feuer_verankern}+0]]}} {{result=[[(@{calc_total_feuer_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c10">
                    <input name="attr_feuer_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_versetzen'
        value='&{template:adz} {{title=Feuer versetzen}} {{dice=[[@{calc_total_feuer_versetzen}+0]]}} {{result=[[(@{calc_total_feuer_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r4 c1"></div>
            
                
                <div class="horizontal node r4 c11">
                    <input name="attr_feuer_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_feuer_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_feuer_zerstören'
        value='&{template:adz} {{title=Feuer zerstören}} {{dice=[[@{calc_total_feuer_zerstören}+0]]}} {{result=[[(@{calc_total_feuer_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r4 c1"></div>
            
        
            
            <label class="domain r5 c1">Geist</label>
            <input class="r5 c2" type="number" step="1" name="attr_geist" max="10"/>
            <div class="r5 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Geist'
        value='&{template:adz} {{title=Entzug (Geist)}} {{dice=[[@{calc_drain_geist}+0]]}} {{result=[[(@{calc_drain_geist}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r5 c4">
                    <input name="attr_geist_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_beherrschen'
        value='&{template:adz} {{title=Geist beherrschen}} {{dice=[[@{calc_total_geist_beherrschen}+0]]}} {{result=[[(@{calc_total_geist_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c5">
                    <input name="attr_geist_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_erkennen'
        value='&{template:adz} {{title=Geist erkennen}} {{dice=[[@{calc_total_geist_erkennen}+0]]}} {{result=[[(@{calc_total_geist_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c6">
                    <input name="attr_geist_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_erschaffen'
        value='&{template:adz} {{title=Geist erschaffen}} {{dice=[[@{calc_total_geist_erschaffen}+0]]}} {{result=[[(@{calc_total_geist_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c7">
                    <input name="attr_geist_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_kooperieren'
        value='&{template:adz} {{title=Geist kooperieren}} {{dice=[[@{calc_total_geist_kooperieren}+0]]}} {{result=[[(@{calc_total_geist_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c8">
                    <input name="attr_geist_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_modifizieren'
        value='&{template:adz} {{title=Geist modifizieren}} {{dice=[[@{calc_total_geist_modifizieren}+0]]}} {{result=[[(@{calc_total_geist_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c9">
                    <input name="attr_geist_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_verankern'
        value='&{template:adz} {{title=Geist verankern}} {{dice=[[@{calc_total_geist_verankern}+0]]}} {{result=[[(@{calc_total_geist_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c10">
                    <input name="attr_geist_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_versetzen'
        value='&{template:adz} {{title=Geist versetzen}} {{dice=[[@{calc_total_geist_versetzen}+0]]}} {{result=[[(@{calc_total_geist_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r5 c1"></div>
            
                
                <div class="horizontal node r5 c11">
                    <input name="attr_geist_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_geist_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_geist_zerstören'
        value='&{template:adz} {{title=Geist zerstören}} {{dice=[[@{calc_total_geist_zerstören}+0]]}} {{result=[[(@{calc_total_geist_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r5 c1"></div>
            
        
            
            <label class="domain r6 c1">Humanoid</label>
            <input class="r6 c2" type="number" step="1" name="attr_humanoid" max="10"/>
            <div class="r6 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Humanoid'
        value='&{template:adz} {{title=Entzug (Humanoid)}} {{dice=[[@{calc_drain_humanoid}+0]]}} {{result=[[(@{calc_drain_humanoid}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r6 c4">
                    <input name="attr_humanoid_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_beherrschen'
        value='&{template:adz} {{title=Humanoid beherrschen}} {{dice=[[@{calc_total_humanoid_beherrschen}+0]]}} {{result=[[(@{calc_total_humanoid_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c5">
                    <input name="attr_humanoid_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_erkennen'
        value='&{template:adz} {{title=Humanoid erkennen}} {{dice=[[@{calc_total_humanoid_erkennen}+0]]}} {{result=[[(@{calc_total_humanoid_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c6">
                    <input name="attr_humanoid_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_erschaffen'
        value='&{template:adz} {{title=Humanoid erschaffen}} {{dice=[[@{calc_total_humanoid_erschaffen}+0]]}} {{result=[[(@{calc_total_humanoid_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c7">
                    <input name="attr_humanoid_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_kooperieren'
        value='&{template:adz} {{title=Humanoid kooperieren}} {{dice=[[@{calc_total_humanoid_kooperieren}+0]]}} {{result=[[(@{calc_total_humanoid_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c8">
                    <input name="attr_humanoid_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_modifizieren'
        value='&{template:adz} {{title=Humanoid modifizieren}} {{dice=[[@{calc_total_humanoid_modifizieren}+0]]}} {{result=[[(@{calc_total_humanoid_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c9">
                    <input name="attr_humanoid_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_verankern'
        value='&{template:adz} {{title=Humanoid verankern}} {{dice=[[@{calc_total_humanoid_verankern}+0]]}} {{result=[[(@{calc_total_humanoid_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c10">
                    <input name="attr_humanoid_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_versetzen'
        value='&{template:adz} {{title=Humanoid versetzen}} {{dice=[[@{calc_total_humanoid_versetzen}+0]]}} {{result=[[(@{calc_total_humanoid_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r6 c1"></div>
            
                
                <div class="horizontal node r6 c11">
                    <input name="attr_humanoid_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_humanoid_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_humanoid_zerstören'
        value='&{template:adz} {{title=Humanoid zerstören}} {{dice=[[@{calc_total_humanoid_zerstören}+0]]}} {{result=[[(@{calc_total_humanoid_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r6 c1"></div>
            
        
            
            <label class="domain r7 c1">Kraft</label>
            <input class="r7 c2" type="number" step="1" name="attr_kraft" max="10"/>
            <div class="r7 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Kraft'
        value='&{template:adz} {{title=Entzug (Kraft)}} {{dice=[[@{calc_drain_kraft}+0]]}} {{result=[[(@{calc_drain_kraft}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r7 c4">
                    <input name="attr_kraft_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_beherrschen'
        value='&{template:adz} {{title=Kraft beherrschen}} {{dice=[[@{calc_total_kraft_beherrschen}+0]]}} {{result=[[(@{calc_total_kraft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c5">
                    <input name="attr_kraft_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_erkennen'
        value='&{template:adz} {{title=Kraft erkennen}} {{dice=[[@{calc_total_kraft_erkennen}+0]]}} {{result=[[(@{calc_total_kraft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c6">
                    <input name="attr_kraft_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_erschaffen'
        value='&{template:adz} {{title=Kraft erschaffen}} {{dice=[[@{calc_total_kraft_erschaffen}+0]]}} {{result=[[(@{calc_total_kraft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c7">
                    <input name="attr_kraft_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_kooperieren'
        value='&{template:adz} {{title=Kraft kooperieren}} {{dice=[[@{calc_total_kraft_kooperieren}+0]]}} {{result=[[(@{calc_total_kraft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c8">
                    <input name="attr_kraft_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_modifizieren'
        value='&{template:adz} {{title=Kraft modifizieren}} {{dice=[[@{calc_total_kraft_modifizieren}+0]]}} {{result=[[(@{calc_total_kraft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c9">
                    <input name="attr_kraft_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_verankern'
        value='&{template:adz} {{title=Kraft verankern}} {{dice=[[@{calc_total_kraft_verankern}+0]]}} {{result=[[(@{calc_total_kraft_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c10">
                    <input name="attr_kraft_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_versetzen'
        value='&{template:adz} {{title=Kraft versetzen}} {{dice=[[@{calc_total_kraft_versetzen}+0]]}} {{result=[[(@{calc_total_kraft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r7 c1"></div>
            
                
                <div class="horizontal node r7 c11">
                    <input name="attr_kraft_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_kraft_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_kraft_zerstören'
        value='&{template:adz} {{title=Kraft zerstören}} {{dice=[[@{calc_total_kraft_zerstören}+0]]}} {{result=[[(@{calc_total_kraft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r7 c1"></div>
            
        
            
            <label class="domain r8 c1">Luft</label>
            <input class="r8 c2" type="number" step="1" name="attr_luft" max="10"/>
            <div class="r8 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Luft'
        value='&{template:adz} {{title=Entzug (Luft)}} {{dice=[[@{calc_drain_luft}+0]]}} {{result=[[(@{calc_drain_luft}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r8 c4">
                    <input name="attr_luft_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_beherrschen'
        value='&{template:adz} {{title=Luft beherrschen}} {{dice=[[@{calc_total_luft_beherrschen}+0]]}} {{result=[[(@{calc_total_luft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c5">
                    <input name="attr_luft_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_erkennen'
        value='&{template:adz} {{title=Luft erkennen}} {{dice=[[@{calc_total_luft_erkennen}+0]]}} {{result=[[(@{calc_total_luft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c6">
                    <input name="attr_luft_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_erschaffen'
        value='&{template:adz} {{title=Luft erschaffen}} {{dice=[[@{calc_total_luft_erschaffen}+0]]}} {{result=[[(@{calc_total_luft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c7">
                    <input name="attr_luft_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_kooperieren'
        value='&{template:adz} {{title=Luft kooperieren}} {{dice=[[@{calc_total_luft_kooperieren}+0]]}} {{result=[[(@{calc_total_luft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c8">
                    <input name="attr_luft_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_modifizieren'
        value='&{template:adz} {{title=Luft modifizieren}} {{dice=[[@{calc_total_luft_modifizieren}+0]]}} {{result=[[(@{calc_total_luft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c9">
                    <input name="attr_luft_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_verankern'
        value='&{template:adz} {{title=Luft verankern}} {{dice=[[@{calc_total_luft_verankern}+0]]}} {{result=[[(@{calc_total_luft_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c10">
                    <input name="attr_luft_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_versetzen'
        value='&{template:adz} {{title=Luft versetzen}} {{dice=[[@{calc_total_luft_versetzen}+0]]}} {{result=[[(@{calc_total_luft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r8 c1"></div>
            
                
                <div class="horizontal node r8 c11">
                    <input name="attr_luft_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_luft_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_luft_zerstören'
        value='&{template:adz} {{title=Luft zerstören}} {{dice=[[@{calc_total_luft_zerstören}+0]]}} {{result=[[(@{calc_total_luft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r8 c1"></div>
            
        
            
            <label class="domain r9 c1">Metall</label>
            <input class="r9 c2" type="number" step="1" name="attr_metall" max="10"/>
            <div class="r9 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Metall'
        value='&{template:adz} {{title=Entzug (Metall)}} {{dice=[[@{calc_drain_metall}+0]]}} {{result=[[(@{calc_drain_metall}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r9 c4">
                    <input name="attr_metall_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_beherrschen'
        value='&{template:adz} {{title=Metall beherrschen}} {{dice=[[@{calc_total_metall_beherrschen}+0]]}} {{result=[[(@{calc_total_metall_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c5">
                    <input name="attr_metall_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_erkennen'
        value='&{template:adz} {{title=Metall erkennen}} {{dice=[[@{calc_total_metall_erkennen}+0]]}} {{result=[[(@{calc_total_metall_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c6">
                    <input name="attr_metall_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_erschaffen'
        value='&{template:adz} {{title=Metall erschaffen}} {{dice=[[@{calc_total_metall_erschaffen}+0]]}} {{result=[[(@{calc_total_metall_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c7">
                    <input name="attr_metall_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_kooperieren'
        value='&{template:adz} {{title=Metall kooperieren}} {{dice=[[@{calc_total_metall_kooperieren}+0]]}} {{result=[[(@{calc_total_metall_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c8">
                    <input name="attr_metall_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_modifizieren'
        value='&{template:adz} {{title=Metall modifizieren}} {{dice=[[@{calc_total_metall_modifizieren}+0]]}} {{result=[[(@{calc_total_metall_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c9">
                    <input name="attr_metall_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_verankern'
        value='&{template:adz} {{title=Metall verankern}} {{dice=[[@{calc_total_metall_verankern}+0]]}} {{result=[[(@{calc_total_metall_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c10">
                    <input name="attr_metall_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_versetzen'
        value='&{template:adz} {{title=Metall versetzen}} {{dice=[[@{calc_total_metall_versetzen}+0]]}} {{result=[[(@{calc_total_metall_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r9 c1"></div>
            
                
                <div class="horizontal node r9 c11">
                    <input name="attr_metall_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_metall_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_metall_zerstören'
        value='&{template:adz} {{title=Metall zerstören}} {{dice=[[@{calc_total_metall_zerstören}+0]]}} {{result=[[(@{calc_total_metall_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r9 c1"></div>
            
        
            
            <label class="domain r10 c1">Pflanze</label>
            <input class="r10 c2" type="number" step="1" name="attr_pflanze" max="10"/>
            <div class="r10 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Pflanze'
        value='&{template:adz} {{title=Entzug (Pflanze)}} {{dice=[[@{calc_drain_pflanze}+0]]}} {{result=[[(@{calc_drain_pflanze}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r10 c4">
                    <input name="attr_pflanze_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_beherrschen'
        value='&{template:adz} {{title=Pflanze beherrschen}} {{dice=[[@{calc_total_pflanze_beherrschen}+0]]}} {{result=[[(@{calc_total_pflanze_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c5">
                    <input name="attr_pflanze_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_erkennen'
        value='&{template:adz} {{title=Pflanze erkennen}} {{dice=[[@{calc_total_pflanze_erkennen}+0]]}} {{result=[[(@{calc_total_pflanze_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c6">
                    <input name="attr_pflanze_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_erschaffen'
        value='&{template:adz} {{title=Pflanze erschaffen}} {{dice=[[@{calc_total_pflanze_erschaffen}+0]]}} {{result=[[(@{calc_total_pflanze_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c7">
                    <input name="attr_pflanze_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_kooperieren'
        value='&{template:adz} {{title=Pflanze kooperieren}} {{dice=[[@{calc_total_pflanze_kooperieren}+0]]}} {{result=[[(@{calc_total_pflanze_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c8">
                    <input name="attr_pflanze_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_modifizieren'
        value='&{template:adz} {{title=Pflanze modifizieren}} {{dice=[[@{calc_total_pflanze_modifizieren}+0]]}} {{result=[[(@{calc_total_pflanze_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c9">
                    <input name="attr_pflanze_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_verankern'
        value='&{template:adz} {{title=Pflanze verankern}} {{dice=[[@{calc_total_pflanze_verankern}+0]]}} {{result=[[(@{calc_total_pflanze_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c10">
                    <input name="attr_pflanze_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_versetzen'
        value='&{template:adz} {{title=Pflanze versetzen}} {{dice=[[@{calc_total_pflanze_versetzen}+0]]}} {{result=[[(@{calc_total_pflanze_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r10 c1"></div>
            
                
                <div class="horizontal node r10 c11">
                    <input name="attr_pflanze_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_pflanze_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_pflanze_zerstören'
        value='&{template:adz} {{title=Pflanze zerstören}} {{dice=[[@{calc_total_pflanze_zerstören}+0]]}} {{result=[[(@{calc_total_pflanze_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r10 c1"></div>
            
        
            
            <label class="domain r11 c1">Tier</label>
            <input class="r11 c2" type="number" step="1" name="attr_tier" max="10"/>
            <div class="r11 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Tier'
        value='&{template:adz} {{title=Entzug (Tier)}} {{dice=[[@{calc_drain_tier}+0]]}} {{result=[[(@{calc_drain_tier}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r11 c4">
                    <input name="attr_tier_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_beherrschen'
        value='&{template:adz} {{title=Tier beherrschen}} {{dice=[[@{calc_total_tier_beherrschen}+0]]}} {{result=[[(@{calc_total_tier_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c5">
                    <input name="attr_tier_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_erkennen'
        value='&{template:adz} {{title=Tier erkennen}} {{dice=[[@{calc_total_tier_erkennen}+0]]}} {{result=[[(@{calc_total_tier_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c6">
                    <input name="attr_tier_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_erschaffen'
        value='&{template:adz} {{title=Tier erschaffen}} {{dice=[[@{calc_total_tier_erschaffen}+0]]}} {{result=[[(@{calc_total_tier_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c7">
                    <input name="attr_tier_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_kooperieren'
        value='&{template:adz} {{title=Tier kooperieren}} {{dice=[[@{calc_total_tier_kooperieren}+0]]}} {{result=[[(@{calc_total_tier_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c8">
                    <input name="attr_tier_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_modifizieren'
        value='&{template:adz} {{title=Tier modifizieren}} {{dice=[[@{calc_total_tier_modifizieren}+0]]}} {{result=[[(@{calc_total_tier_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c9">
                    <input name="attr_tier_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_verankern'
        value='&{template:adz} {{title=Tier verankern}} {{dice=[[@{calc_total_tier_verankern}+0]]}} {{result=[[(@{calc_total_tier_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c10">
                    <input name="attr_tier_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_versetzen'
        value='&{template:adz} {{title=Tier versetzen}} {{dice=[[@{calc_total_tier_versetzen}+0]]}} {{result=[[(@{calc_total_tier_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r11 c1"></div>
            
                
                <div class="horizontal node r11 c11">
                    <input name="attr_tier_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_tier_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_tier_zerstören'
        value='&{template:adz} {{title=Tier zerstören}} {{dice=[[@{calc_total_tier_zerstören}+0]]}} {{result=[[(@{calc_total_tier_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r11 c1"></div>
            
        
            
            <label class="domain r12 c1">Wasser</label>
            <input class="r12 c2" type="number" step="1" name="attr_wasser" max="10"/>
            <div class="r12 c3 penalty-free-cell">
                

<button type='roll'
        name='roll_roll-drain-Wasser'
        value='&{template:adz} {{title=Entzug (Wasser)}} {{dice=[[@{calc_drain_wasser}+0]]}} {{result=[[(@{calc_drain_wasser}+0)d6>5cs>5cf<0 - @{penalty}*0]]}} {{penalty=@{penalty}}} {{apply_penalty=0}}'>
</button>


                <span class="hint">&#x1f90d;</span>
            </div>
            
                
                <div class="horizontal node r12 c4">
                    <input name="attr_wasser_beherrschen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_beherrschen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_beherrschen'
        value='&{template:adz} {{title=Wasser beherrschen}} {{dice=[[@{calc_total_wasser_beherrschen}+0]]}} {{result=[[(@{calc_total_wasser_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c4"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c5">
                    <input name="attr_wasser_erkennen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_erkennen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_erkennen'
        value='&{template:adz} {{title=Wasser erkennen}} {{dice=[[@{calc_total_wasser_erkennen}+0]]}} {{result=[[(@{calc_total_wasser_erkennen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c5"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c6">
                    <input name="attr_wasser_erschaffen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_erschaffen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_erschaffen'
        value='&{template:adz} {{title=Wasser erschaffen}} {{dice=[[@{calc_total_wasser_erschaffen}+0]]}} {{result=[[(@{calc_total_wasser_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c6"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c7">
                    <input name="attr_wasser_kooperieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_kooperieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_kooperieren'
        value='&{template:adz} {{title=Wasser kooperieren}} {{dice=[[@{calc_total_wasser_kooperieren}+0]]}} {{result=[[(@{calc_total_wasser_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c7"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c8">
                    <input name="attr_wasser_modifizieren" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_modifizieren" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_modifizieren'
        value='&{template:adz} {{title=Wasser modifizieren}} {{dice=[[@{calc_total_wasser_modifizieren}+0]]}} {{result=[[(@{calc_total_wasser_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c8"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c9">
                    <input name="attr_wasser_verankern" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_verankern" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_verankern'
        value='&{template:adz} {{title=Wasser verankern}} {{dice=[[@{calc_total_wasser_verankern}+0]]}} {{result=[[(@{calc_total_wasser_verankern}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c9"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c10">
                    <input name="attr_wasser_versetzen" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_versetzen" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_versetzen'
        value='&{template:adz} {{title=Wasser versetzen}} {{dice=[[@{calc_total_wasser_versetzen}+0]]}} {{result=[[(@{calc_total_wasser_versetzen}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c10"></div>
                <div class="row-marker r12 c1"></div>
            
                
                <div class="horizontal node r12 c11">
                    <input name="attr_wasser_zerstören" type="number" step="1" max="10" />
                    <div class="stack clickable-total">
                        <input name="attr_calc_total_wasser_zerstören" class="number" readonly="true" />
                        

<button type='roll'
        name='roll_wasser_zerstören'
        value='&{template:adz} {{title=Wasser zerstören}} {{dice=[[@{calc_total_wasser_zerstören}+0]]}} {{result=[[(@{calc_total_wasser_zerstören}+0)d6>5cs>5cf<0 - @{penalty}*@{apply_penalty}]]}} {{penalty=@{penalty}}} {{apply_penalty=@{apply_penalty}}}'>
</button>


                    </div>
                </div>
                <div class="column-marker r1 c11"></div>
                <div class="row-marker r12 c1"></div>
            
        
    </div>
</div>

    <rolltemplate class="sheet-rolltemplate-adz">
    <div class="scroll apply-penalty_{{apply_penalty}}">
        <h1>{{title}}</h1>

        {{#dice}}
            <p>
                {{result}}
                Erfolg{{#^rollTotal() result 1}}e{{/^rollTotal() result 1}}
                mit
                <span class="plain-roll transparent-roll">{{dice}}</span>
                Würfel{{#^rollTotal() dice 1}}n{{/^rollTotal() dice 1}}
            </p>
            <p class="note if-penalty-applied">Erfolgsabzug von {{penalty}} berücksichtigt.</p>
            <p class="note if-penalty-ignored">Erfolgsabzug ignoriert.</p>
        {{/dice}}
        {{^dice}}
            <p class="large transparent-roll">{{result}}</p>
        {{/dice}}
    </div>
</rolltemplate>

</div>

<script type="text/worker">
var attributes = ["kk", "ko", "ge", "ff", "kl", "wk", "in", "ch", "gl"];

var drainAttributes = ["kl", "wk", "in", "ch"];

var standardChecks = [{
        "key": "remember",
        "label": "Sich erinnern",
        "attr1": "kl",
        "attr2": "wk"
    }, {
        "key": "selfcontrol",
        "label": "Selbstbeherrschung",
        "attr1": "ko",
        "attr2": "wk"
    }, {
        "key": "learning",
        "label": "Lernen",
        "attr1": "kl",
        "attr2": "in"
    }, {
        "key": "stubbornness",
        "label": "Sturheit",
        "attr1": "wk",
        "attr2": "ch"
    }];

var techniques = ["beherrschen", "erkennen", "erschaffen", "kooperieren", "modifizieren", "verankern", "versetzen", "zerstören"];

var domains = ["darstellung", "erde", "feuer", "geist", "humanoid", "kraft", "luft", "metall", "pflanze", "tier", "wasser"];

const DOMAINS_AND_DRAIN_RELATED = ['drain_attribute'].concat(drainAttributes,
    domains,
    domains.map(domain => `calc_drain_${domain}`));
const MAGIC_MATRIX_INPUT = DOMAINS_AND_DRAIN_RELATED.concat(techniques);

function getIntegersFrom(values) {
    let result = {};
    for (const key of Object.keys(values)) {
        result[key] = parseInt(values[key]) || 0;
    }
    return result;
}

function getSectionIDsOrdered(sectionName, callback) {
    'use strict';
    getAttrs([`_reporder_${sectionName}`], function (v) {
        getSectionIDs(sectionName, function (idArray) {
            let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
                ids = [...new Set(reporderArray.filter(x => idArray.includes(x)).concat(idArray))];
            callback(ids);
        });
    });
}

// TODO encapsulate values&resultAttributes into a Transaction class with commit() doing the real writeAttrs() call
function addAttrIfChanged(values, targetKey, calculated, resultAttributes) {
    if (Number.isNaN(calculated) || calculated == null) {
        console.warn(`Normalizing illegal value ${calculated} to "" for ${targetKey}`);
        calculated = "";
    }
    if (targetKey in values) {
        if (values[targetKey] == calculated) {
            console.debug(`Skipping write of identical value for ${targetKey}`);
            return;
        }
    } else {
        console.warn(`Value for ${targetKey} was not loaded or does not exist`);
    }
    resultAttributes[targetKey] = calculated;
}

function writeAttrs(attributes) {
    let keys = Object.keys(attributes);
    const count = keys.length;
    if (count > 0) {
        console.info(`Writing ${count} attributes: ${keys}`);
        setAttrs(attributes);
    } else {
        console.debug("No attributes to write");
    }
}

class RepeatingSection {
    constructor(minimumRowCount, columnCount, key, newRowCreator) {
        this._minimumRowCount = minimumRowCount;
        this._columnCount = columnCount;
        this._newRowCreator = newRowCreator;
        this._sectionName = `repeating_${key}`;
        this._idOrder = [];
        this._removalListener = () => {};

        on("change:_reporder:" + key, eventInfo => {
            console.debug(`${this._sectionName} change - eventInfo:`, eventInfo);
            if (eventInfo.newValue) {
                this._idOrder = eventInfo.newValue.toLowerCase().split(',');
                console.debug(`${this._sectionName} change - new ordering:`, this._idOrder);
            } else {
                console.debug(`${this._sectionName} change - event includes no ordering info`);
                this.refreshOrder();
            }
        });

        on("remove:" + this._sectionName, eventInfo => {
            console.debug(`${this._sectionName} remove - eventInfo:`, eventInfo);

            const regex = new RegExp("^" + this._sectionName + "_([^_]+)$");
            const removedId = eventInfo.sourceAttribute.match(regex)[1];
            console.info("removedId:", removedId);

            // Store last N row IDs before updating idOrder
            const lastFewRowIds = this._idOrder.slice(this._columnCount * -1);
            console.info("last N row IDs:", lastFewRowIds);

            getSectionIDsOrdered(this._sectionName, idOrder => {
                this._idOrder = idOrder;
                console.debug(`${this._sectionName} remove - new ordering:`, this._idOrder);

                var resultAttributes = {};

                const count = idOrder.length;
                if (count < this._minimumRowCount) {
                    const newId = this.addNewRow(resultAttributes);
                    console.info(`user removed a row; appending ${newId} to keep minimum row count`);
                } else if (count % this._columnCount != 0) {
                    const removedRowId = removedId.toLowerCase();
                    if (lastFewRowIds.includes(removedRowId)) {
                        console.info(`user removed row ${removedId}, one of the last ${this._columnCount} rows. balance columns by removing the other rows (if empty) or add a new one`);
                        const remainingRowIds = lastFewRowIds.filter(id => id != removedRowId);
                        this.balanceRowsAfterTailRemoval(remainingRowIds);
                    } else {
                        console.info("user removed non-tail row; appending a new one to keep columns balanced");
                        this.addNewRow(resultAttributes);
                    }
                }

                this._removalListener(eventInfo.removedInfo, resultAttributes);

                writeAttrs(resultAttributes);
            });
        });
    }

    initialize(callback) {
        getSectionIDsOrdered(this._sectionName, idOrder => {
            this._idOrder = idOrder;
            callback();
        });
    }

    generateMinimumRows(resultAttributes) {
        for (let i = this._idOrder.length; i < this._minimumRowCount; i++) {
            this.addNewRow(resultAttributes);
        }
    }

    addNewRow(resultAttributes) {
        const id = generateRowID();
        this._newRowCreator(this._sectionName + "_" + id, resultAttributes);
        this._idOrder.push(id.toLowerCase());
        return id;
    }

    get idOrder() {
        return this._idOrder;
    }

    onChange(eventHandler) {
        on('change:' + this._sectionName, eventHandler);
    }

    onRemoval(listener) {
        this._removalListener = listener;
    }

    refreshOrder() {
        getSectionIDsOrdered(this._sectionName, idOrder => {
            this._idOrder = idOrder;
            console.debug(`${this._sectionName} refresh - new ordering:`, this._idOrder);
        });
    }

    balanceRowsAfterTailRemoval(remainingRowIds) {
        const inputAttributes = remainingRowIds.flatMap(id => [
            'name', 'value'].map(suffix => `${this._sectionName}_${id}_${suffix}`));
        getAttrs(inputAttributes, values => {
            const rowsAreEmpty = Object.values(values).every((element) => element === "" || element === "-");
            if (rowsAreEmpty) {
                console.info(`other rows ${remainingRowIds} are empty, too - removing.`);

                remainingRowIds.forEach(rowId => {
                    removeRepeatingRow(`${this._sectionName}_${rowId}`);
                });

                this.refreshOrder();
            } else {
                var resultAttributes = {};

                const newId = this.addNewRow(resultAttributes);
                console.info(`not removing the remaining non-empty rows ${remainingRowIds}. keeping columns balanced by adding new row ${newId}.`);

                writeAttrs(resultAttributes);
            }
        });
    }
}


for (const abbreviation of attributes) {
    addAttributeListener(abbreviation);
}

function addAttributeListener(abbreviation) {
    const targetKey = "calc_total_" + abbreviation;
    // TODO create registry of startup handlers which specify their input attributes & write to one shared resultAttributes object used for a single writeAttrs call
    on("sheet:opened change:" + abbreviation, function() {
        console.log("attribute change:", abbreviation);
        getAttrs([abbreviation, targetKey].concat(DOMAINS_AND_DRAIN_RELATED), function(values) {
            let integers = getIntegersFrom(values);

            let resultAttributes = {};

            var total = "";
            if (integers[abbreviation]) {
                total = integers[abbreviation] * 2;
            }

            addAttrIfChanged(values, targetKey, total, resultAttributes);

            let drainAttributeAbbreviation = values.drain_attribute;
            if (drainAttributeAbbreviation === abbreviation) {
                console.log("recalculating drain");
                calculateAllDrainRolls(integers, drainAttributeAbbreviation, resultAttributes);
            }

            writeAttrs(resultAttributes);
        });
    });
}

on("sheet:opened", () => {
    getAttrs(attributes.concat(standardChecks.map(check => `calc_check_${check.key}`)), function(values) {
        let integers = getIntegersFrom(values);
        let resultAttributes = {};
        for (const check of standardChecks) {
            calculateStandardCheck(integers, check, resultAttributes);
        }
        writeAttrs(resultAttributes);
    });
});


for (const check of standardChecks) {
    addStandardCheckListener(check);
}

function addStandardCheckListener(check) {
    on(`change:${check.attr1} change:${check.attr2}`, function() {
        console.log("standardCheck change:", check.key);
        getAttrs([check.attr1, check.attr2, makeCheckKey(check)], function(values) {
            let integers = getIntegersFrom(values);
            let resultAttributes = {};
            calculateStandardCheck(integers, check, resultAttributes);
            writeAttrs(resultAttributes);
        });
    });
}

function makeCheckKey(check) {
    return `calc_check_${check.key}`;
}

function calculateStandardCheck(integers, check, resultAttributes) {
    let calculated = integers[check.attr1] + integers[check.attr2];
    addAttrIfChanged(integers, makeCheckKey(check), calculated, resultAttributes);
}

const checkList = new RepeatingSection(4, 2, 'checks', (rowPrefix, attributesToSet) => {
    console.log("checkList RepeatingSection newRow", rowPrefix);
    attributesToSet[rowPrefix + '_name'] = '';
});

on("sheet:opened", function() {
    checkList.initialize(() => {
        let resultAttributes = {};
        checkList.generateMinimumRows(resultAttributes);
        writeAttrs(resultAttributes);
    });
});

on("clicked:add-checks", function() {
    var newAttributes = {};
    checkList.addNewRow(newAttributes);
    checkList.addNewRow(newAttributes);
    writeAttrs(newAttributes);
});

const REFLEXES_SYMLINK_KEY = "calc_symlink_Reflexe";
const INITIATIVE_BASE_KEY = "calc_initiative_base";

const skillList = new RepeatingSection(16, 2, 'skills', (rowPrefix, attributesToSet) => {
    attributesToSet[rowPrefix + '_attribute'] = '-';
});

function getSkillRelatedKeys() {
    let idOrder = skillList.idOrder;
    return [REFLEXES_SYMLINK_KEY].concat(attributes, idOrder.flatMap(id => [
        'name', 'attribute', 'value', 'calc_total'].map(suffix => `repeating_skills_${id}_${suffix}`)));
}

on("sheet:opened", () => {
    skillList.initialize(() => {
        getAttrs(getSkillRelatedKeys(), values => {
            let resultAttributes = {};
            bulkCalculateSkills(values, resultAttributes);
            skillList.generateMinimumRows(resultAttributes);
            writeAttrs(resultAttributes);
        });
    });
});

on(attributes.map(attribute => `change:${attribute}`).join(" "), () => {
    getAttrs(getSkillRelatedKeys(), values => {
        let resultAttributes = {};
        bulkCalculateSkills(values, resultAttributes);
        writeAttrs(resultAttributes);
    });
});

on("clicked:add-skills", function() {
    var newAttributes = {};
    skillList.addNewRow(newAttributes);
    skillList.addNewRow(newAttributes);
    writeAttrs(newAttributes);
});

skillList.onChange(eventInfo => {
    if (/_(value|attribute)$/.test(eventInfo.sourceAttribute)) {
        console.debug("skill change", eventInfo);

        let inputAttributes = ['_value', '_attribute', '_name', '_calc_total'].map(suffix => eventInfo.triggerName
            + suffix);
        getAttrs(inputAttributes, values => {
            let resultAttributes = {};
            bulkCalculateSkills(values, resultAttributes);
            writeAttrs(resultAttributes);
        });
    } else if (/_name$/.test(eventInfo.sourceAttribute)) {
        console.debug("skill renamed", eventInfo);

        if (eventInfo.previousValue == "Reflexe") {
            let resultAttributes = {};
            resultAttributes[REFLEXES_SYMLINK_KEY] = "";
            writeAttrs(resultAttributes);
        } else if (eventInfo.newValue == "Reflexe") {
            let valueKey = eventInfo.sourceAttribute.replace("_name", "_value");
            getAttrs([valueKey, REFLEXES_SYMLINK_KEY], values => {
                let resultAttributes = {};
                addAttrIfChanged(values, REFLEXES_SYMLINK_KEY, values[valueKey], resultAttributes);
                writeAttrs(resultAttributes);
            });
        }
    }

});

skillList.onRemoval((removedInfo, resultAttributes) => {
    const nameKey = Object.keys(removedInfo).filter(key => key.endsWith("_name"))[0];
    if (removedInfo[nameKey] == "Reflexe") {
        resultAttributes[REFLEXES_SYMLINK_KEY] = "";
    }
})

function bulkCalculateSkills(values, resultAttributes) {
    for (const key of Object.keys(values).filter(k => k.endsWith('_value'))) {
        let prefix = key.replace('_value', '');
        calculateSkill(values, prefix, resultAttributes);
    }
}

function calculateSkill(values, prefix, resultAttributes) {
    let rawValue = values[prefix + "_value"];
    let value = parseInt(rawValue) || 0;

    const name = values[prefix + "_name"];
    if (name == "Reflexe") {
        addAttrIfChanged(values, REFLEXES_SYMLINK_KEY, value, resultAttributes);
    }

    let attributeAbbreviation = values[prefix + "_attribute"];

    let result = 0;
    if (attributeAbbreviation != "-") {
        let attributeRawValue = values[attributeAbbreviation];
        let attributeValue = parseInt(attributeRawValue) || 0;
        result = attributeValue + value;
    }
    addAttrIfChanged(values, `${prefix}_calc_total`, result, resultAttributes);
}

on(`sheet:opened change:in change:${REFLEXES_SYMLINK_KEY}`, eventInfo => {
    console.log("initiative base change:", eventInfo.sourceAttribute);
    getAttrs(["in", REFLEXES_SYMLINK_KEY, INITIATIVE_BASE_KEY], values => {
        let integers = getIntegersFrom(values);

        let calculated = 0;
        for (const key of ["in", REFLEXES_SYMLINK_KEY]) {
            calculated += integers[key] * 2;
        }
        console.log("initiative base =", calculated);

        let resultAttributes = {};
        addAttrIfChanged(values, INITIATIVE_BASE_KEY, calculated, resultAttributes);
        writeAttrs(resultAttributes);
    });
});



for (const domain of domains) {
    addRowListener(domain);
    for (const technique of techniques) {
        addCellListener(domain, technique);
    }
}

for (const technique of techniques) {
    addColumnListener(technique);
}

function addCellListener(domainName, techniqueName) {
    let focus = makeFocusKey(domainName, techniqueName);
    on("change:" + focus, function() {
        console.log("cell change", domainName, techniqueName);
        getAttrs([domainName, techniqueName, focus, makeMagicTotalKey(domainName, techniqueName)], function(values) {
            let integers = getIntegersFrom(values);
            let result = {};
            calculateMagicCell(integers, domainName, techniqueName, result);
            writeAttrs(result);
        });
    });
}

function addRowListener(domainName) {
    var inputAttributes = MAGIC_MATRIX_INPUT.concat(techniques.flatMap(techniqueName => [
        makeFocusKey(domainName, techniqueName), makeMagicTotalKey(domainName, techniqueName)]));
    on("sheet:opened change:" + domainName, function() {
        console.log("row change", domainName);
        getAttrs(inputAttributes, function(values) {
            let integers = getIntegersFrom(values);
            let result = {};

            for (const techniqueName of techniques) {
                calculateMagicCell(integers, domainName, techniqueName, result);
            }

            calculateDrainRoll(integers, domainName, values["drain_attribute"], result);

            writeAttrs(result);
        });
    });
}

function makeFocusKey(domainName, techniqueName) {
    return `${domainName}_${techniqueName}`;
}

function makeMagicTotalKey(domainName, techniqueName) {
    return `calc_total_${domainName}_${techniqueName}`;
}

function addColumnListener(techniqueName) {
    var inputAttributes = [techniqueName].concat(domains, domains.flatMap(domainName => [
        makeFocusKey(domainName, techniqueName), makeMagicTotalKey(domainName, techniqueName)]));
    on("change:" + techniqueName, function() {
        console.log("column change", techniqueName);
        getAttrs(inputAttributes, function(values) {
            let integers = getIntegersFrom(values);
            let result = {};
            for (const domain of domains) {
                calculateMagicCell(integers, domain, techniqueName, result);
            }
            writeAttrs(result);
        });
    });
}

function calculateMagicCell(integers, domainName, techniqueName, resultAttributes) {
    var calculated = "";
    if (integers[domainName] && integers[techniqueName]) {
        calculated = integers[domainName] + integers[techniqueName] + integers[makeFocusKey(domainName, techniqueName)];
    }
    addAttrIfChanged(integers, makeMagicTotalKey(domainName, techniqueName), calculated, resultAttributes)
}

// TODO have one 'sheet:opened' per category which uses a shared getAttrs() (and setAttrs()) call. only the 'change:' listeners must stay separate.
on("sheet:opened change:drain_attribute", function(eventInfo) {
    getAttrs(DOMAINS_AND_DRAIN_RELATED, function(values) {
        let integers = getIntegersFrom(values);
        let drainAttributeAbbreviation = values["drain_attribute"];
        console.log(
            `calculating drain based on attribute ${drainAttributeAbbreviation}=${integers[drainAttributeAbbreviation]}`,
            eventInfo);

        let result = {};
        calculateAllDrainRolls(integers, drainAttributeAbbreviation, result);
        writeAttrs(result);
    });
});

function calculateAllDrainRolls(integers, drainAttributeAbbreviation, resultAttributes) {
    for (const domainName of domains) {
        calculateDrainRoll(integers, domainName, drainAttributeAbbreviation, resultAttributes);
    }
}

function calculateDrainRoll(integers, domainName, drainAttributeAbbreviation, resultAttributes) {
    let key = "calc_drain_" + domainName;
    let calculated = integers[domainName] + integers[drainAttributeAbbreviation];
    addAttrIfChanged(integers, key, calculated, resultAttributes);
}

on("clicked:toggle_apply_penalty", () => {
    getAttrs(["apply_penalty"], (v) => {
        setAttrs({
            "apply_penalty": v["apply_penalty"] !== "1" ? "1" : "0"
        });
    });
});

console.log("AdZ sheetworker initialized");

</script>
