

<div class="sheet-layout">

    <div class="sheet-basics">
        <label>Name</label>
        <input type="text" name="attr_character_name" />

        <label>Erfolgsabzug</label>
        <input type="number" step="1" name="attr_penalty" class="sheet-variable" value="0"/>

        <label>Benutzerdefinierte Probe</label>
        
<button type='roll'
        name='roll_custom-roll'
        value='&{template:adz} {{title=?{Titel|Probe}}} {{dice=[[?{Würfelanzahl|1}+0]]}} {{result=[[(?{Würfelanzahl|1}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

    </div>

    <div class="sheet-notes">
        <label>Notizen</label>
        <textarea name="attr_character_notes"></textarea>
    </div>

    <div class="sheet-attributes">
        <h2>Attribute</h2>

        <div class="sheet-attributes-list">
            
            
<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Körperkraft</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_kk" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kk" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kk'
        value='&{template:adz} {{title=Körperkraft}} {{dice=[[@{calc_total_kk}+0]]}} {{result=[[(@{calc_total_kk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Konstitution</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_ko" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ko" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_ko'
        value='&{template:adz} {{title=Konstitution}} {{dice=[[@{calc_total_ko}+0]]}} {{result=[[(@{calc_total_ko}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Gewandtheit</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_ge" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ge" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_ge'
        value='&{template:adz} {{title=Gewandtheit}} {{dice=[[@{calc_total_ge}+0]]}} {{result=[[(@{calc_total_ge}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Fingerfertigkeit</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_ff" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ff" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_ff'
        value='&{template:adz} {{title=Fingerfertigkeit}} {{dice=[[@{calc_total_ff}+0]]}} {{result=[[(@{calc_total_ff}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Klugheit</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_kl" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kl" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kl'
        value='&{template:adz} {{title=Klugheit}} {{dice=[[@{calc_total_kl}+0]]}} {{result=[[(@{calc_total_kl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Willenskraft</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_wk" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wk" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wk'
        value='&{template:adz} {{title=Willenskraft}} {{dice=[[@{calc_total_wk}+0]]}} {{result=[[(@{calc_total_wk}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Intuition</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_in" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_in" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_in'
        value='&{template:adz} {{title=Intuition}} {{dice=[[@{calc_total_in}+0]]}} {{result=[[(@{calc_total_in}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Charisma</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_ch" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_ch" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_ch'
        value='&{template:adz} {{title=Charisma}} {{dice=[[@{calc_total_ch}+0]]}} {{result=[[(@{calc_total_ch}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'
        class="labelled">
    <label>Glück</label>
</button>

            <div class="horizontal">
                <input type="number" step="1" name="attr_gl" max="10"/>
                <div class="stack clickable-total">
                    <input name="attr_calc_total_gl" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_gl'
        value='&{template:adz} {{title=Glück}} {{dice=[[@{calc_total_gl}+0]]}} {{result=[[(@{calc_total_gl}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
        </div>
    </div>

    <div class="sheet-skills">
        <h2>Fertigkeiten</h2>

        <div class="skill-list">
            <fieldset class="repeating_skills">
              <input type="text" name="attr_name" />
              <select name="attr_attribute">
                
                <option value="kk">kk</option>
                
                <option value="ko">ko</option>
                
                <option value="ge">ge</option>
                
                <option value="ff">ff</option>
                
                <option value="kl">kl</option>
                
                <option value="wk">wk</option>
                
                <option value="in">in</option>
                
                <option value="ch">ch</option>
                
                <option value="gl">gl</option>
                
              </select>
              <input type="number" name="attr_value" />
              

                <div class="stack clickable-total">
                    <input name="attr_calc_total" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_@{name}'
        value='&{template:adz} {{title=@{name}}} {{dice=[[@{calc_total}+0]]}} {{result=[[(@{calc_total}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </fieldset>
        </div>
    </div>

    <div class="sheet-magic">
        <h2>Techniken & Magiebereiche</h2>

        <div class="sheet-magic-matrix">
            <div></div>
            <div></div>
            
            <div class="vertical">
                <label>Beherrschen</label>
                <input name="attr_beherrschen" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Erkennen</label>
                <input name="attr_erkennen" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Erschaffen</label>
                <input name="attr_erschaffen" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Kooperieren</label>
                <input name="attr_kooperieren" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Modifizieren</label>
                <input name="attr_modifizieren" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Verankern</label>
                <input name="attr_verankern" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Versetzen</label>
                <input name="attr_versetzen" type="number" step="1" max="10"/>
            </div>
            
            <div class="vertical">
                <label>Zerstören</label>
                <input name="attr_zerstören" type="number" step="1" max="10"/>
            </div>
            
            
            <label>Darstellung</label>
            <input type="number" step="1" name="attr_darstellung" max="10"/>
            
            <div class="horizontal">
                <input name="attr_darstellung_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_beherrschen'
        value='&{template:adz} {{title=Darstellung beherrschen}} {{dice=[[@{calc_total_darstellung_beherrschen}+0]]}} {{result=[[(@{calc_total_darstellung_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_erkennen'
        value='&{template:adz} {{title=Darstellung erkennen}} {{dice=[[@{calc_total_darstellung_erkennen}+0]]}} {{result=[[(@{calc_total_darstellung_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_erschaffen'
        value='&{template:adz} {{title=Darstellung erschaffen}} {{dice=[[@{calc_total_darstellung_erschaffen}+0]]}} {{result=[[(@{calc_total_darstellung_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_kooperieren'
        value='&{template:adz} {{title=Darstellung kooperieren}} {{dice=[[@{calc_total_darstellung_kooperieren}+0]]}} {{result=[[(@{calc_total_darstellung_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_modifizieren'
        value='&{template:adz} {{title=Darstellung modifizieren}} {{dice=[[@{calc_total_darstellung_modifizieren}+0]]}} {{result=[[(@{calc_total_darstellung_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_verankern'
        value='&{template:adz} {{title=Darstellung verankern}} {{dice=[[@{calc_total_darstellung_verankern}+0]]}} {{result=[[(@{calc_total_darstellung_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_versetzen'
        value='&{template:adz} {{title=Darstellung versetzen}} {{dice=[[@{calc_total_darstellung_versetzen}+0]]}} {{result=[[(@{calc_total_darstellung_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_darstellung_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_darstellung_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_darstellung_zerstören'
        value='&{template:adz} {{title=Darstellung zerstören}} {{dice=[[@{calc_total_darstellung_zerstören}+0]]}} {{result=[[(@{calc_total_darstellung_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Erde</label>
            <input type="number" step="1" name="attr_erde" max="10"/>
            
            <div class="horizontal">
                <input name="attr_erde_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_beherrschen'
        value='&{template:adz} {{title=Erde beherrschen}} {{dice=[[@{calc_total_erde_beherrschen}+0]]}} {{result=[[(@{calc_total_erde_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_erkennen'
        value='&{template:adz} {{title=Erde erkennen}} {{dice=[[@{calc_total_erde_erkennen}+0]]}} {{result=[[(@{calc_total_erde_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_erschaffen'
        value='&{template:adz} {{title=Erde erschaffen}} {{dice=[[@{calc_total_erde_erschaffen}+0]]}} {{result=[[(@{calc_total_erde_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_kooperieren'
        value='&{template:adz} {{title=Erde kooperieren}} {{dice=[[@{calc_total_erde_kooperieren}+0]]}} {{result=[[(@{calc_total_erde_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_modifizieren'
        value='&{template:adz} {{title=Erde modifizieren}} {{dice=[[@{calc_total_erde_modifizieren}+0]]}} {{result=[[(@{calc_total_erde_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_verankern'
        value='&{template:adz} {{title=Erde verankern}} {{dice=[[@{calc_total_erde_verankern}+0]]}} {{result=[[(@{calc_total_erde_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_versetzen'
        value='&{template:adz} {{title=Erde versetzen}} {{dice=[[@{calc_total_erde_versetzen}+0]]}} {{result=[[(@{calc_total_erde_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_erde_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_erde_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_erde_zerstören'
        value='&{template:adz} {{title=Erde zerstören}} {{dice=[[@{calc_total_erde_zerstören}+0]]}} {{result=[[(@{calc_total_erde_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Feuer</label>
            <input type="number" step="1" name="attr_feuer" max="10"/>
            
            <div class="horizontal">
                <input name="attr_feuer_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_beherrschen'
        value='&{template:adz} {{title=Feuer beherrschen}} {{dice=[[@{calc_total_feuer_beherrschen}+0]]}} {{result=[[(@{calc_total_feuer_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_erkennen'
        value='&{template:adz} {{title=Feuer erkennen}} {{dice=[[@{calc_total_feuer_erkennen}+0]]}} {{result=[[(@{calc_total_feuer_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_erschaffen'
        value='&{template:adz} {{title=Feuer erschaffen}} {{dice=[[@{calc_total_feuer_erschaffen}+0]]}} {{result=[[(@{calc_total_feuer_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_kooperieren'
        value='&{template:adz} {{title=Feuer kooperieren}} {{dice=[[@{calc_total_feuer_kooperieren}+0]]}} {{result=[[(@{calc_total_feuer_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_modifizieren'
        value='&{template:adz} {{title=Feuer modifizieren}} {{dice=[[@{calc_total_feuer_modifizieren}+0]]}} {{result=[[(@{calc_total_feuer_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_verankern'
        value='&{template:adz} {{title=Feuer verankern}} {{dice=[[@{calc_total_feuer_verankern}+0]]}} {{result=[[(@{calc_total_feuer_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_versetzen'
        value='&{template:adz} {{title=Feuer versetzen}} {{dice=[[@{calc_total_feuer_versetzen}+0]]}} {{result=[[(@{calc_total_feuer_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_feuer_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_feuer_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_feuer_zerstören'
        value='&{template:adz} {{title=Feuer zerstören}} {{dice=[[@{calc_total_feuer_zerstören}+0]]}} {{result=[[(@{calc_total_feuer_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Geist</label>
            <input type="number" step="1" name="attr_geist" max="10"/>
            
            <div class="horizontal">
                <input name="attr_geist_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_beherrschen'
        value='&{template:adz} {{title=Geist beherrschen}} {{dice=[[@{calc_total_geist_beherrschen}+0]]}} {{result=[[(@{calc_total_geist_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_erkennen'
        value='&{template:adz} {{title=Geist erkennen}} {{dice=[[@{calc_total_geist_erkennen}+0]]}} {{result=[[(@{calc_total_geist_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_erschaffen'
        value='&{template:adz} {{title=Geist erschaffen}} {{dice=[[@{calc_total_geist_erschaffen}+0]]}} {{result=[[(@{calc_total_geist_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_kooperieren'
        value='&{template:adz} {{title=Geist kooperieren}} {{dice=[[@{calc_total_geist_kooperieren}+0]]}} {{result=[[(@{calc_total_geist_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_modifizieren'
        value='&{template:adz} {{title=Geist modifizieren}} {{dice=[[@{calc_total_geist_modifizieren}+0]]}} {{result=[[(@{calc_total_geist_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_verankern'
        value='&{template:adz} {{title=Geist verankern}} {{dice=[[@{calc_total_geist_verankern}+0]]}} {{result=[[(@{calc_total_geist_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_versetzen'
        value='&{template:adz} {{title=Geist versetzen}} {{dice=[[@{calc_total_geist_versetzen}+0]]}} {{result=[[(@{calc_total_geist_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_geist_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_geist_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_geist_zerstören'
        value='&{template:adz} {{title=Geist zerstören}} {{dice=[[@{calc_total_geist_zerstören}+0]]}} {{result=[[(@{calc_total_geist_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Humanoid</label>
            <input type="number" step="1" name="attr_humanoid" max="10"/>
            
            <div class="horizontal">
                <input name="attr_humanoid_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_beherrschen'
        value='&{template:adz} {{title=Humanoid beherrschen}} {{dice=[[@{calc_total_humanoid_beherrschen}+0]]}} {{result=[[(@{calc_total_humanoid_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_erkennen'
        value='&{template:adz} {{title=Humanoid erkennen}} {{dice=[[@{calc_total_humanoid_erkennen}+0]]}} {{result=[[(@{calc_total_humanoid_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_erschaffen'
        value='&{template:adz} {{title=Humanoid erschaffen}} {{dice=[[@{calc_total_humanoid_erschaffen}+0]]}} {{result=[[(@{calc_total_humanoid_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_kooperieren'
        value='&{template:adz} {{title=Humanoid kooperieren}} {{dice=[[@{calc_total_humanoid_kooperieren}+0]]}} {{result=[[(@{calc_total_humanoid_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_modifizieren'
        value='&{template:adz} {{title=Humanoid modifizieren}} {{dice=[[@{calc_total_humanoid_modifizieren}+0]]}} {{result=[[(@{calc_total_humanoid_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_verankern'
        value='&{template:adz} {{title=Humanoid verankern}} {{dice=[[@{calc_total_humanoid_verankern}+0]]}} {{result=[[(@{calc_total_humanoid_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_versetzen'
        value='&{template:adz} {{title=Humanoid versetzen}} {{dice=[[@{calc_total_humanoid_versetzen}+0]]}} {{result=[[(@{calc_total_humanoid_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_humanoid_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_humanoid_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_humanoid_zerstören'
        value='&{template:adz} {{title=Humanoid zerstören}} {{dice=[[@{calc_total_humanoid_zerstören}+0]]}} {{result=[[(@{calc_total_humanoid_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Kraft</label>
            <input type="number" step="1" name="attr_kraft" max="10"/>
            
            <div class="horizontal">
                <input name="attr_kraft_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_beherrschen'
        value='&{template:adz} {{title=Kraft beherrschen}} {{dice=[[@{calc_total_kraft_beherrschen}+0]]}} {{result=[[(@{calc_total_kraft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_erkennen'
        value='&{template:adz} {{title=Kraft erkennen}} {{dice=[[@{calc_total_kraft_erkennen}+0]]}} {{result=[[(@{calc_total_kraft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_erschaffen'
        value='&{template:adz} {{title=Kraft erschaffen}} {{dice=[[@{calc_total_kraft_erschaffen}+0]]}} {{result=[[(@{calc_total_kraft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_kooperieren'
        value='&{template:adz} {{title=Kraft kooperieren}} {{dice=[[@{calc_total_kraft_kooperieren}+0]]}} {{result=[[(@{calc_total_kraft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_modifizieren'
        value='&{template:adz} {{title=Kraft modifizieren}} {{dice=[[@{calc_total_kraft_modifizieren}+0]]}} {{result=[[(@{calc_total_kraft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_verankern'
        value='&{template:adz} {{title=Kraft verankern}} {{dice=[[@{calc_total_kraft_verankern}+0]]}} {{result=[[(@{calc_total_kraft_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_versetzen'
        value='&{template:adz} {{title=Kraft versetzen}} {{dice=[[@{calc_total_kraft_versetzen}+0]]}} {{result=[[(@{calc_total_kraft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_kraft_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_kraft_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_kraft_zerstören'
        value='&{template:adz} {{title=Kraft zerstören}} {{dice=[[@{calc_total_kraft_zerstören}+0]]}} {{result=[[(@{calc_total_kraft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Luft</label>
            <input type="number" step="1" name="attr_luft" max="10"/>
            
            <div class="horizontal">
                <input name="attr_luft_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_beherrschen'
        value='&{template:adz} {{title=Luft beherrschen}} {{dice=[[@{calc_total_luft_beherrschen}+0]]}} {{result=[[(@{calc_total_luft_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_erkennen'
        value='&{template:adz} {{title=Luft erkennen}} {{dice=[[@{calc_total_luft_erkennen}+0]]}} {{result=[[(@{calc_total_luft_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_erschaffen'
        value='&{template:adz} {{title=Luft erschaffen}} {{dice=[[@{calc_total_luft_erschaffen}+0]]}} {{result=[[(@{calc_total_luft_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_kooperieren'
        value='&{template:adz} {{title=Luft kooperieren}} {{dice=[[@{calc_total_luft_kooperieren}+0]]}} {{result=[[(@{calc_total_luft_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_modifizieren'
        value='&{template:adz} {{title=Luft modifizieren}} {{dice=[[@{calc_total_luft_modifizieren}+0]]}} {{result=[[(@{calc_total_luft_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_verankern'
        value='&{template:adz} {{title=Luft verankern}} {{dice=[[@{calc_total_luft_verankern}+0]]}} {{result=[[(@{calc_total_luft_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_versetzen'
        value='&{template:adz} {{title=Luft versetzen}} {{dice=[[@{calc_total_luft_versetzen}+0]]}} {{result=[[(@{calc_total_luft_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_luft_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_luft_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_luft_zerstören'
        value='&{template:adz} {{title=Luft zerstören}} {{dice=[[@{calc_total_luft_zerstören}+0]]}} {{result=[[(@{calc_total_luft_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Metall</label>
            <input type="number" step="1" name="attr_metall" max="10"/>
            
            <div class="horizontal">
                <input name="attr_metall_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_beherrschen'
        value='&{template:adz} {{title=Metall beherrschen}} {{dice=[[@{calc_total_metall_beherrschen}+0]]}} {{result=[[(@{calc_total_metall_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_erkennen'
        value='&{template:adz} {{title=Metall erkennen}} {{dice=[[@{calc_total_metall_erkennen}+0]]}} {{result=[[(@{calc_total_metall_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_erschaffen'
        value='&{template:adz} {{title=Metall erschaffen}} {{dice=[[@{calc_total_metall_erschaffen}+0]]}} {{result=[[(@{calc_total_metall_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_kooperieren'
        value='&{template:adz} {{title=Metall kooperieren}} {{dice=[[@{calc_total_metall_kooperieren}+0]]}} {{result=[[(@{calc_total_metall_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_modifizieren'
        value='&{template:adz} {{title=Metall modifizieren}} {{dice=[[@{calc_total_metall_modifizieren}+0]]}} {{result=[[(@{calc_total_metall_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_verankern'
        value='&{template:adz} {{title=Metall verankern}} {{dice=[[@{calc_total_metall_verankern}+0]]}} {{result=[[(@{calc_total_metall_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_versetzen'
        value='&{template:adz} {{title=Metall versetzen}} {{dice=[[@{calc_total_metall_versetzen}+0]]}} {{result=[[(@{calc_total_metall_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_metall_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_metall_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_metall_zerstören'
        value='&{template:adz} {{title=Metall zerstören}} {{dice=[[@{calc_total_metall_zerstören}+0]]}} {{result=[[(@{calc_total_metall_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Pflanze</label>
            <input type="number" step="1" name="attr_pflanze" max="10"/>
            
            <div class="horizontal">
                <input name="attr_pflanze_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_beherrschen'
        value='&{template:adz} {{title=Pflanze beherrschen}} {{dice=[[@{calc_total_pflanze_beherrschen}+0]]}} {{result=[[(@{calc_total_pflanze_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_erkennen'
        value='&{template:adz} {{title=Pflanze erkennen}} {{dice=[[@{calc_total_pflanze_erkennen}+0]]}} {{result=[[(@{calc_total_pflanze_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_erschaffen'
        value='&{template:adz} {{title=Pflanze erschaffen}} {{dice=[[@{calc_total_pflanze_erschaffen}+0]]}} {{result=[[(@{calc_total_pflanze_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_kooperieren'
        value='&{template:adz} {{title=Pflanze kooperieren}} {{dice=[[@{calc_total_pflanze_kooperieren}+0]]}} {{result=[[(@{calc_total_pflanze_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_modifizieren'
        value='&{template:adz} {{title=Pflanze modifizieren}} {{dice=[[@{calc_total_pflanze_modifizieren}+0]]}} {{result=[[(@{calc_total_pflanze_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_verankern'
        value='&{template:adz} {{title=Pflanze verankern}} {{dice=[[@{calc_total_pflanze_verankern}+0]]}} {{result=[[(@{calc_total_pflanze_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_versetzen'
        value='&{template:adz} {{title=Pflanze versetzen}} {{dice=[[@{calc_total_pflanze_versetzen}+0]]}} {{result=[[(@{calc_total_pflanze_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_pflanze_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_pflanze_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_pflanze_zerstören'
        value='&{template:adz} {{title=Pflanze zerstören}} {{dice=[[@{calc_total_pflanze_zerstören}+0]]}} {{result=[[(@{calc_total_pflanze_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Tier</label>
            <input type="number" step="1" name="attr_tier" max="10"/>
            
            <div class="horizontal">
                <input name="attr_tier_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_beherrschen'
        value='&{template:adz} {{title=Tier beherrschen}} {{dice=[[@{calc_total_tier_beherrschen}+0]]}} {{result=[[(@{calc_total_tier_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_erkennen'
        value='&{template:adz} {{title=Tier erkennen}} {{dice=[[@{calc_total_tier_erkennen}+0]]}} {{result=[[(@{calc_total_tier_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_erschaffen'
        value='&{template:adz} {{title=Tier erschaffen}} {{dice=[[@{calc_total_tier_erschaffen}+0]]}} {{result=[[(@{calc_total_tier_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_kooperieren'
        value='&{template:adz} {{title=Tier kooperieren}} {{dice=[[@{calc_total_tier_kooperieren}+0]]}} {{result=[[(@{calc_total_tier_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_modifizieren'
        value='&{template:adz} {{title=Tier modifizieren}} {{dice=[[@{calc_total_tier_modifizieren}+0]]}} {{result=[[(@{calc_total_tier_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_verankern'
        value='&{template:adz} {{title=Tier verankern}} {{dice=[[@{calc_total_tier_verankern}+0]]}} {{result=[[(@{calc_total_tier_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_versetzen'
        value='&{template:adz} {{title=Tier versetzen}} {{dice=[[@{calc_total_tier_versetzen}+0]]}} {{result=[[(@{calc_total_tier_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_tier_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_tier_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_tier_zerstören'
        value='&{template:adz} {{title=Tier zerstören}} {{dice=[[@{calc_total_tier_zerstören}+0]]}} {{result=[[(@{calc_total_tier_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
            <label>Wasser</label>
            <input type="number" step="1" name="attr_wasser" max="10"/>
            
            <div class="horizontal">
                <input name="attr_wasser_beherrschen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_beherrschen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_beherrschen'
        value='&{template:adz} {{title=Wasser beherrschen}} {{dice=[[@{calc_total_wasser_beherrschen}+0]]}} {{result=[[(@{calc_total_wasser_beherrschen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_erkennen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_erkennen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_erkennen'
        value='&{template:adz} {{title=Wasser erkennen}} {{dice=[[@{calc_total_wasser_erkennen}+0]]}} {{result=[[(@{calc_total_wasser_erkennen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_erschaffen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_erschaffen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_erschaffen'
        value='&{template:adz} {{title=Wasser erschaffen}} {{dice=[[@{calc_total_wasser_erschaffen}+0]]}} {{result=[[(@{calc_total_wasser_erschaffen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_kooperieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_kooperieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_kooperieren'
        value='&{template:adz} {{title=Wasser kooperieren}} {{dice=[[@{calc_total_wasser_kooperieren}+0]]}} {{result=[[(@{calc_total_wasser_kooperieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_modifizieren" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_modifizieren" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_modifizieren'
        value='&{template:adz} {{title=Wasser modifizieren}} {{dice=[[@{calc_total_wasser_modifizieren}+0]]}} {{result=[[(@{calc_total_wasser_modifizieren}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_verankern" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_verankern" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_verankern'
        value='&{template:adz} {{title=Wasser verankern}} {{dice=[[@{calc_total_wasser_verankern}+0]]}} {{result=[[(@{calc_total_wasser_verankern}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_versetzen" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_versetzen" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_versetzen'
        value='&{template:adz} {{title=Wasser versetzen}} {{dice=[[@{calc_total_wasser_versetzen}+0]]}} {{result=[[(@{calc_total_wasser_versetzen}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            <div class="horizontal">
                <input name="attr_wasser_zerstören" type="number" step="1" max="10" />
                <div class="stack clickable-total">
                    <input name="attr_calc_total_wasser_zerstören" class="number" readonly="true" />
                    
<button type='roll'
        name='roll_wasser_zerstören'
        value='&{template:adz} {{title=Wasser zerstören}} {{dice=[[@{calc_total_wasser_zerstören}+0]]}} {{result=[[(@{calc_total_wasser_zerstören}+0)d6>5cs>5cf<0 - @{penalty}]]}} {{penalty=@{penalty}}}'>
</button>

                </div>
            </div>
            
            
        </div>
    </div>

    <rolltemplate class="sheet-rolltemplate-adz">
        <h1>{{title}}</h1>
        <p>{{result}} Erfolge mit <span class="plain">{{dice}}</span> Würfeln</p>
        <p class="note">Erfolgsabzug von {{penalty}} berücksichtigt.</p>
    </rolltemplate>

</div>


<script type="text/worker">

function getIntegersFrom(values) {
    let result = {};
    for (const key of Object.keys(values)) {
        result[key] = parseInt(values[key]) || 0;
    }
    return result;
}

var attributes = [
    
        "kk", 
        "ko", 
        "ge", 
        "ff", 
        "kl", 
        "wk", 
        "in", 
        "ch", 
        "gl"
];

for (const abbreviation of attributes) {
    addAttributeListener(abbreviation);
}

function addAttributeListener(abbreviation) {
    on("sheet:opened change:" + abbreviation, function() {
        console.log("attribute change:", abbreviation);
        getAttrs([abbreviation], function(values) {
            let integers = getIntegersFrom(values);

            var total = "";
            if (integers[abbreviation]) {
                total = integers[abbreviation] * 2;
            }

            let result = {};
            result["calc_total_" + abbreviation] = total;
            setAttrs(result);
        });
    });
}

on("sheet:opened", function() {
    getSectionIDs("repeating_skills", function(ids) {
        let valueIds = ids.map(id => "repeating_skills_" + id + "_value");
        let attributeIds = ids.map(id => "repeating_skills_" + id + "_attribute");
        var inputAttributes = valueIds.concat(attributeIds);
        bulkCalculateSkills(inputAttributes);
    });
});

on("change:repeating_skills", function(eventInfo) {
    console.log("change:", eventInfo.sourceAttribute);
    if (/_(value|attribute)$/.test(eventInfo.sourceAttribute)) {
        console.log("change", eventInfo);

        let inputAttributes = ["_value", "_attribute"].map(s => eventInfo.triggerName + s);
        console.log(inputAttributes);
        bulkCalculateSkills(inputAttributes);
    }
});

function bulkCalculateSkills(inputAttributes) {
    getAttrs(inputAttributes.concat(attributes), function(values) {
        let result = {};
        for (const key of Object.keys(values).filter(key => key.endsWith("_value"))) {
            let prefix = key.replace("_value", "");
            calculateSkill(values, prefix, result);
        }
        console.log("bulk calculate result:", result);
        setAttrs(result);
    });
}

function calculateSkill(values, prefix, result) {
    let rawValue = values[prefix + "_value"];
    let value = parseInt(rawValue) || 0;

    let attributeAbbreviation = values[prefix + "_attribute"];
    let attributeRawValue = values[attributeAbbreviation];
    let attributeValue = parseInt(attributeRawValue) || 0;

    console.log("calculate " + prefix + " based on values: ", values);
    result[prefix + "_calc_total"] = attributeValue + value;
}


var techniques = [
    "beherrschen", "erkennen", "erschaffen", "kooperieren", "modifizieren", "verankern", "versetzen", "zerstören"
];

var domains = [
    "darstellung", "erde", "feuer", "geist", "humanoid", "kraft", "luft", "metall", "pflanze", "tier", "wasser"
];

for (const domain of domains) {
    addRowListener(domain);
    for (const technique of techniques) {
        addCellListener(domain, technique);
    }
}

for (const technique of techniques) {
    addColumnListener(technique);
}

function addCellListener(domain, technique) {
    var combination = domain + "_" + technique;
    on("change:" + combination, function() {
        console.log("cell change", domain, technique);
        getAttrs([domain, technique, combination], function(values) {
            let result = {};
            calculateMagicCell(values, domain, technique, result);
            setAttrs(result);
       });
    });
}

function addRowListener(domain) {
    var inputAttributes = [domain].concat(techniques, techniques.map(technique => domain + "_" + technique));
    on("sheet:opened change:" + domain, function() {
        console.log("row change", domain);
        getAttrs(inputAttributes, function(values) {
            let result = {};
            for (const technique of techniques) {
                calculateMagicCell(values, domain, technique, result);
            }
            setAttrs(result);
        });
    });
}

function addColumnListener(technique) {
    var inputAttributes = [technique].concat(domains, domains.map(domain => domain + "_" + technique));
    on("change:" + technique, function() {
        console.log("column change", technique);
        getAttrs(inputAttributes, function(values) {
            let result = {};
            for (const domain of domains) {
                calculateMagicCell(values, domain, technique, result);
            }
            setAttrs(result);
        });
    });
}

function calculateMagicCell(values, domain, technique, result) {
    let integers = getIntegersFrom(values);
    var total = "";
    if (integers[domain] && integers[technique]) {
        total = integers[domain] + integers[technique] + integers[domain + "_" + technique];
    }
    result["calc_total_" + domain + "_" + technique] = total;
}
</script>
